<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Favicon -->
    <link rel="icon" href="/img/favicons/favicon.ico">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Truffle Suite">
    <link rel="icon" sizes="192x192" href="/img/favicons/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Truffle Suite">
    <link rel="apple-touch-icon" href="/img/favicons/apple-touch-icon.png">

    <!-- Tile icon for Win8/10 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="img/favicons/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <!-- Facebook OpenGraph -->
    <meta property="og:site_name" content="Truffle Suite" />
    <meta property="og:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
    <meta property="og:title" content="Truffle Suite | Documentation | Truffle | Contract Abstractions" />
    <meta property="og:url" content="https://trufflesuite.com/docs/truffle/reference/contract-abstractio" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="https://truffleframework.com/img/favicons/truffle-share.png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="Truffle Suite" />
    <meta name="twitter:title" content="Truffle Suite | Documentation | Truffle | Contract Abstractions" />
    <meta name="twitter:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
    <meta name="twitter:creator" content="Truffle Suite" />
    <meta name="twitter:domain" content="trufflesuite.com" />
    <meta name="twitter:image:src" content="https://truffleframework.com/img/favicons/truffle-share.png" />
    
    <meta name="google-site-verification" content="BSgPkMHzw7IxJTpEElNfD8ZZYPzXgOQiTVPzAxAG8-o" />

      <title>Truffle Suite | Documentation | Truffle | Contract Abstractions</title>

    <link href="https://fonts.googleapis.com/css?family=Grand+Hotel|Open+Sans|Oswald|Varela+Round|Roboto+Condensed|Roboto+Mono" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css" integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/index.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top" id="primaryNav">
      <a class="navbar-brand current" href="/">
        <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" />TRUFFLE SUITE
      </a>
    
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    
      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="suiteDropdown" href="#" data-toggle="dropdown">SUITE</a>
    
            <div class="dropdown-menu">
              <a class="text-truffle" href="/truffle">
                <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><span class="narrow">T</span>RUFFLE
              </a>
              <a class="text-ganache" href="/ganache">
                <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" />Ganache
              </a>
              <a class="text-drizzle" href="/drizzle">
                <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" />dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le
              </a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/docs">DOCS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/tutorials">TUTORIALS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/boxes">BOXES</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/blog">BLOG</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/events">EVENTS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/community">COMMUNITY</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/university">UNIVERSITY</a>
          </li>
        </ul>
      </div>
    </nav>    
    <main role="main" class="container-fluid">
      <!--<div class="row pt-4 pb-4">
        <div class="col">
          <form>
            <div class="row">
              <div class="col">
                <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="ðŸ” Search">
              </div>
              <div class="col">
                <select id="inputState" class="form-control">
                  <option selected>4.1</option>
                  <option>4.0.6</option>
                  <option>4.0.5</option>
                </select>
              </div>
              <div class="col">
                <button type="submit" class="btn btn-truffle">SEARCH</button>
              </div>
            </div>
          </form>
        </div>
      </div>-->

      <div class="row row-docs-main">
        <aside class="col-lg-3 docs-sidebar" id="docsSidebar">
          <h2 class="space-icon d-lg-none text-center" id="docsSidebarToggle"><i class="fas fa-book"></i> SEARCH &amp; CONTENTS</h2>
        
          <form class="mb-4" id="searchForm">
            <div class="input-group">
              <input type="text" class="form-control" id="searchInput" placeholder="Search">
              <div class="input-group-append">
                <button type="submit" class="btn btn-truffle">SEARCH</button>
              </div>
            </div>
          </form>
        
          <a class="toggle-truffle" href="#truffleDocs" data-toggle="collapse">
            <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><h2 class="text-truffle"><span class="narrow">T</span>RUFFLE</h2>
          </a>
        
          <div class="collapse truffle" id="truffleDocs" data-parent="#docsSidebar">
            <ul>
              <a href="/docs/truffle/overview"><li>Overview</li></a>
              <a href="/docs/truffle/quickstart"><li>Quickstart</li></a>
            </ul>
              <h3>Getting Started</h3>
              <ul>
                  <a href="/docs/truffle/getting-started/installation"><li>Installation</li></a>
                  <a href="/docs/truffle/getting-started/creating-a-project"><li>Creating a Project</li></a>
                  <a href="/docs/truffle/getting-started/compiling-contracts"><li>Compiling Contracts</li></a>
                  <a href="/docs/truffle/getting-started/running-migrations"><li>Running Migrations</li></a>
                  <a href="/docs/truffle/getting-started/interacting-with-your-contracts"><li>Interacting with Your Contracts</li></a>
                  <a href="/docs/truffle/getting-started/truffle-with-metamask"><li>Truffle with MetaMask</li></a>
                  <a href="/docs/truffle/getting-started/package-management-via-ethpm"><li>Package Management via EthPM</li></a>
                  <a href="/docs/truffle/getting-started/package-management-via-npm"><li>Package Management via NPM</li></a>
                  <a href="/docs/truffle/getting-started/debugging-your-contracts"><li>Debugging Your Contracts</li></a>
                  <a href="/docs/truffle/getting-started/using-truffle-develop-and-the-console"><li>Using Truffle Develop and The Console</li></a>
                  <a href="/docs/truffle/getting-started/writing-external-scripts"><li>Writing External Scripts</li></a>
              </ul>
              <h3>Testing</h3>
              <ul>
                  <a href="/docs/truffle/testing/testing-your-contracts"><li>Testing Your Contracts</li></a>
                  <a href="/docs/truffle/testing/writing-tests-in-javascript"><li>Writing Tests in JavaScript</li></a>
                  <a href="/docs/truffle/testing/writing-tests-in-solidity"><li>Writing Tests in Solidity</li></a>
              </ul>
              <h3>Advanced</h3>
              <ul>
                  <a href="/docs/truffle/advanced/networks-and-app-deployment"><li>Networks and App Deployment</li></a>
                  <a href="/docs/truffle/advanced/build-processes"><li>Build Processes</li></a>
                  <a href="/docs/truffle/advanced/creating-a-truffle-box"><li>Creating a Truffle Box</li></a>
              </ul>
              <h3>Reference</h3>
              <ul>
                  <a href="/docs/truffle/reference/choosing-an-ethereum-client"><li>Choosing an Ethereum Client</li></a>
                  <a href="/docs/truffle/reference/configuration"><li>Configuration</li></a>
                  <a href="/docs/truffle/reference/contract-abstractions"><li>Contract Abstractions</li></a>
                  <a href="/docs/truffle/reference/truffle-commands"><li>Truffle Commands</li></a>
                  <a href="/docs/truffle/reference/contact-the-developers"><li>Contact The Developers</li></a>
              </ul>
          </div>
        
          <a class="toggle-ganache" href="#ganacheDocs" data-toggle="collapse">
            <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" /><h2 class="text-ganache">Ganache</h2>
          </a>
          
          <div class="collapse ganache" id="ganacheDocs" data-parent="#docsSidebar">
            <ul>
              <a href="/docs/ganache/overview"><li>Overview</li></a>
              <a href="/docs/ganache/quickstart"><li>Quickstart</li></a>
            </ul>
          </div>
        
          <a class="toggle-drizzle" href="#drizzleDocs" data-toggle="collapse">
            <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" /><h2 class="text-drizzle">dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le</h2>
          </a>
          
          <div class="collapse drizzle" id="drizzleDocs" data-parent="#docsSidebar">
            <ul>
              <a href="/docs/drizzle/overview"><li>Overview</li></a>
              <a href="/docs/drizzle/quickstart"><li>Quickstart</li></a>
            </ul>
              <h3>Getting Started</h3>
              <ul>
                  <a href="/docs/drizzle/getting-started/using-an-existing-redux-store"><li>Using an Existing Redux Store</li></a>
                  <a href="/docs/drizzle/getting-started/contract-interaction"><li>Contract Interaction</li></a>
              </ul>
              <h3>React</h3>
              <ul>
                  <a href="/docs/drizzle/react/react-integration"><li>React Integration</li></a>
                  <a href="/docs/drizzle/react/react-components"><li>React Components</li></a>
              </ul>
              <h3>Reference</h3>
              <ul>
                  <a href="/docs/drizzle/reference/drizzle-options"><li>Drizzle Options</li></a>
                  <a href="/docs/drizzle/reference/drizzle-state"><li>Drizzle State</li></a>
                  <a href="/docs/drizzle/reference/how-data-stays-fresh"><li>How Data Stays Fresh</li></a>
              </ul>
          </div>
        </aside>
        <div class="col-lg-9 bd-light-cream docs-content">
          
    <h1 class="link-markdown">
      <a href="#contract-abstractions" name="contract-abstractions"><i class="fas fa-link"></i></a>
      Contract Abstractions
    </h1>
  <p>Truffle provides contract abstractions for interacting with your contracts.  Skip ahead to the <a href="/docs/truffle/reference/contract-abstractions#api">api section</a> for a list of contract methods.</p>

    <h3 class="link-markdown">
      <a href="#usage" name="usage"><i class="fas fa-link"></i></a>
      Usage
    </h3>
  <p>To obtain a contract abstraction you can require it with the contract name from the <code>artifacts</code> object.  Outside of the console this is an object available in migration files, tests, and exec scripts.
You would require your contract as follows:</p>
<pre><code class="lang-javascript">const MyContract = artifacts.require(&quot;MyContract&quot;);
</code></pre>
<p>You can also obtain one in the developer console.  Your contract types are available here and all you need to do is use the <code>at</code>, <code>deployed</code>, or <code>new</code> method.</p>
<pre><code class="lang-javascript">truffle(development)&gt; const myContract = await MyContract.deployed();
</code></pre>
<p>You now have access to the following functions on <code>MyContract</code>, as well as many others:</p>
<ul>
<li><code>at()</code>: Create an instance of <code>MyContract</code> that represents your contract at a specific address.</li>
<li><code>deployed()</code>: Create an instance of <code>MyContract</code> that represents the default address managed by <code>MyContract</code>.</li>
<li><code>new()</code>: Deploy a new version of this contract to the network, getting an instance of <code>MyContract</code> that represents the newly deployed instance.</li>
</ul>
<p>Each instance is tied to a specific address on the Ethereum network, and each instance has a 1-to-1 mapping from Javascript functions to contract functions. For instance, if your Solidity contract had a function defined <code>someFunction(uint value) {}</code> (solidity), then you could execute that function on the network like so:</p>
<pre><code class="lang-javascript">let deployed;
MyContract.deployed()
  .then((instance) =&gt; {
    deployed = instance;
    return deployed.someFunction(5);
  }).then((result) =&gt; {
    // Do something with the result or continue with more transactions.
  });
</code></pre>
<p>You can also use async/await syntax which is often much less verbose.
We will use async/await for the rest of this document but you may also use a promises for interfacing with contract methods as well.</p>
<pre><code class="lang-javascript">const deployed = await MyContract.deployed();
const result = await deployed.someFunction(5);
// Do something with the result or continue with more transactions.
</code></pre>
<p>See the <a href="/docs/truffle/getting-started/interacting-with-your-contracts#processing-transaction-results">processing transaction results</a> section to learn more about the results object obtained from making transactions.</p>
<p>Contract methods and events have an EventEmitter interface.  So you can set up handlers like the following:</p>
<pre><code class="lang-javascript">const example = await artifacts.require(&quot;Example&quot;).deployed();

example
  .setValue(45)
  .on(&#39;transactionHash&#39;, hash =&gt; {})
  .on(&#39;receipt&#39;, receipt =&gt; {})
  .on(&#39;error&#39;, error =&gt; {})
  .on(&#39;confirmation&#39;, (num, receipt) =&gt; {})
  .then(receipt =&gt; {});
</code></pre>
<pre><code class="lang-javascript">example
  .ExampleEvent()
  .on(&#39;data&#39;, event =&gt; ... etc ... )

example
  .ExampleEvent()
  .once(&#39;data&#39;, event =&gt; ... etc ... )
</code></pre>

    <h1 class="link-markdown">
      <a href="#api" name="api"><i class="fas fa-link"></i></a>
      API
    </h1>
  <p>There are two API&#39;s you&#39;ll need to be aware of. One is the static Contract Abstraction API and the other is the Contract Instance API. The Abstraction API is a set of functions that exist for all contract abstractions, and those function exist on the abstraction itself (i.e., <code>MyContract.at()</code>). In contrast, the Instance API is the API available to contract instances -- i.e., abstractions that represent a specific contract on the network -- and that API is created dynamically based on functions available in your Solidity source file.</p>

    <h3 class="link-markdown">
      <a href="#contract-abstraction-api" name="contract-abstraction-api"><i class="fas fa-link"></i></a>
      Contract Abstraction API
    </h3>
  <p>Each contract abstraction -- <code>MyContract</code> in the examples above -- have the following useful functions:</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-new-arg1-arg2-tx-params-code-" name="-code-mycontract-new-arg1-arg2-tx-params-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.new([arg1, arg2, ...], [tx params])</code>
    </h4>
  <p>This function take whatever contructor parameters your contract requires and deploys a new instance of the contract to the network. There&#39;s an optional last argument which you can use to pass transaction parameters including the transaction from address, gas limit and gas price. This function returns a Promise that resolves into a new instance of the contract abstraction at the newly deployed address.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-at-address-code-" name="-code-mycontract-at-address-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.at(address)</code>
    </h4>
  <p>This function creates a new instance of the contract abstraction representing the contract at the passed in address. Returns a &quot;thenable&quot; object (not yet an actual Promise for backward compatibility). Resolves to a contract abstraction instance after ensuring code exists at the specified address.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-deployed-code-" name="-code-mycontract-deployed-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.deployed()</code>
    </h4>
  <p>Creates an instance of the contract abstraction representing the contract at its deployed address. The deployed address is a special value given to truffle-contract that, when set, saves the address internally so that the deployed address can be inferred from the given Ethereum network being used. This allows you to write code referring to a specific deployed contract without having to manage those addresses yourself. Like <code>at()</code>, <code>deployed()</code> is thenable, and will resolve to a contract abstraction instance representing the deployed contract after ensuring that code exists at that location and that that address exists on the network being used.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-link-instance-code-" name="-code-mycontract-link-instance-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.link(instance)</code>
    </h4>
  <p>Link a library represented by a contract abstraction instance to MyContract. The library must first be deployed and have its deployed address set. The name and deployed address will be inferred from the contract abstraction instance. When this form of <code>MyContract.link()</code> is used, MyContract will consume all of the linked library&#39;s events and will be able to report that those events occurred during the result of a transaction.</p>
<p>Libraries can be linked multiple times and will overwrite their previous linkage.</p>
<p>Note: This method has two other forms, but this form is recommended.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-link-name-address-code-" name="-code-mycontract-link-name-address-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.link(name, address)</code>
    </h4>
  <p>Link a library with a specific name and address to MyContract. The library&#39;s events will not be consumed using this form.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-link-object-code-" name="-code-mycontract-link-object-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.link(object)</code>
    </h4>
  <p>Link multiple libraries denoted by an Object to MyContract. The keys must be strings representing the library names and the values must be strings representing the addresses. Like above, libraries&#39; events will not be consumed using this form.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-networks-code-" name="-code-mycontract-networks-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.networks()</code>
    </h4>
  <p>View a list of network ids this contract abstraction has been set up to represent.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-setprovider-provider-code-" name="-code-mycontract-setprovider-provider-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.setProvider(provider)</code>
    </h4>
  <p>Sets the web3 provider this contract abstraction will use to make transactions.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-setnetwork-network_id-code-" name="-code-mycontract-setnetwork-network_id-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.setNetwork(network_id)</code>
    </h4>
  <p>Sets the network that MyContract is currently representing.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-hasnetwork-network_id-code-" name="-code-mycontract-hasnetwork-network_id-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.hasNetwork(network_id)</code>
    </h4>
  <p>Returns a boolean denoting whether or not this contract abstraction is set up to represent a specific network.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-defaults-new_defaults-code-" name="-code-mycontract-defaults-new_defaults-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.defaults([new_defaults])</code>
    </h4>
  <p>Get&#39;s and optionally sets transaction defaults for all instances created from this abstraction. If called without any parameters it will simply return an Object representing current defaults. If an Object is passed, this will set new defaults. Example default transaction values that can be set are:</p>
<pre><code class="lang-javascript">MyContract.defaults({
  from: ...,
  gas: ...,
  gasPrice: ...,
  value: ...
})
</code></pre>
<p>Setting a default <code>from</code> address, for instance, is useful when you have a contract abstraction you intend to represent one user (i.e., one address).</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-clone-network_id-code-" name="-code-mycontract-clone-network_id-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.clone(network_id)</code>
    </h4>
  <p>Clone a contract abstraction to get another object that manages the same contract artifacts, but using a different <code>network_id</code>. This is useful if you&#39;d like to manage the same contract but on a different network. When using this function, don&#39;t forget to set the correct provider afterward.</p>
<pre><code class="lang-javascript">const MyOtherContract = MyContract.clone(1337);
</code></pre>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-numberformat-number_type-code-" name="-code-mycontract-numberformat-number_type-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.numberFormat = number_type</code>
    </h4>
  <p>You can set this property to choose the number format that abstraction methods return.  The default behavior is to return BN.</p>
<pre><code class="lang-javascript">// Choices are:  `[&quot;BigNumber&quot;, &quot;BN&quot;, &quot;String&quot;].
const Example = artifacts.require(&#39;Example&#39;);
Example.numberFormat = &#39;BigNumber&#39;;
</code></pre>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-timeout-block_timeout-code-" name="-code-mycontract-timeout-block_timeout-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.timeout(block_timeout)</code>
    </h4>
  <p>This method allows you to set the block timeout for transactions.  Contract instances created from this abstraction will have the specified transaction block timeout.  This means that if a transaction does not immediately get mined, it will retry for the specified number of blocks.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-autogas-lt-boolean-gt-code-" name="-code-mycontract-autogas-lt-boolean-gt-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.autoGas = &lt;boolean&gt;</code>
    </h4>
  <p>If this is set to true, instances created from this abstraction will use <code>web3.eth.estimateGas</code> and then apply a gas multiplier to determine the amount of gas to include with the transaction.  The default value for this is <code>true</code>.  See <a href="/docs/truffle/reference/contract-abstractions#-code-mycontract-gasmultiplier-gas_multiplier-code-">gasMultiplier</a>.</p>

    <h4 class="link-markdown">
      <a href="#-code-mycontract-gasmultiplier-gas_multiplier-code-" name="-code-mycontract-gasmultiplier-gas_multiplier-code-"><i class="fas fa-link"></i></a>
      <code>MyContract.gasMultiplier(gas_multiplier)</code>
    </h4>
  <p>This is the value used when <code>autoGas</code> is enabled to determine the amount of gas to include with transactions.  The gas is computed by using <code>web3.eth.estimateGas</code> and multiplying it by the gas multiplier.  The default value is <code>1.25</code>.</p>

    <h3 class="link-markdown">
      <a href="#contract-instance-api" name="contract-instance-api"><i class="fas fa-link"></i></a>
      Contract Instance API
    </h3>
  <p>Each contract instance is different based on the source Solidity contract, and the API is created dynamically. For the purposes of this documentation, let&#39;s use the following Solidity source code below:</p>
<pre><code class="lang-javascript">contract MyContract {
  uint public value;
  event ValueSet(uint val);
  function setValue(uint val) {
    value = val;
    emit ValueSet(value);
  }
  function getValue() constant returns (uint) {
    return value;
  }
}
</code></pre>
<p>From Javascript&#39;s point of view, this contract has three functions: <code>setValue</code>, <code>getValue</code> and <code>value</code>. This is because <code>value</code> is public and automatically creates a getter function for it.</p>

    <h4 class="link-markdown">
      <a href="#making-a-transaction-via-a-contract-function" name="making-a-transaction-via-a-contract-function"><i class="fas fa-link"></i></a>
      Making a transaction via a contract function
    </h4>
  <p>When we call <code>setValue()</code>, this creates a transaction. From Javascript:</p>
<pre><code class="lang-javascript">const result = await instance.setValue(5);
// result object contains import information about the transaction
console.log(&quot;Value was set to&quot;, result.logs[0].args.val);
</code></pre>
<p>The result object that gets returned looks like this:</p>
<pre><code class="lang-javascript">{
  tx: &quot;0x6cb0bbb6466b342ed7bc4a9816f1da8b92db1ccf197c3f91914fc2c721072ebd&quot;,
  receipt: {
    // The return value from web3.eth.getTransactionReceipt(hash)
    // See https://github.com/ethereum/wiki/wiki/JavaScript-API#web3ethgettransactionreceipt
  },
  logs: [
    {
      address: &quot;0x13274fe19c0178208bcbee397af8167a7be27f6f&quot;,
      args: {
        val: BigNumber(5),
      },
      blockHash: &quot;0x2f0700b5d039c6ea7cdcca4309a175f97826322beb49aca891bf6ea82ce019e6&quot;,
      blockNumber: 40,
      event: &quot;ValueSet&quot;,
      logIndex: 0,
      transactionHash: &quot;0x6cb0bbb6466b342ed7bc4a9816f1da8b92db1ccf197c3f91914fc2c721072ebd&quot;,
      transactionIndex: 0,
      type:&quot;mined&quot;,
    },
  ],
}
</code></pre>
<p>Note that if the function being executed in the transaction has a return value, you will not get that
return value inside this result. You must instead use an event (like <code>ValueSet</code>) and look up the result
in the <code>logs</code> array.</p>

    <h4 class="link-markdown">
      <a href="#explicitly-making-a-call-instead-of-a-transaction" name="explicitly-making-a-call-instead-of-a-transaction"><i class="fas fa-link"></i></a>
      Explicitly making a call instead of a transaction
    </h4>
  <p>We can call <code>setValue()</code> without creating a transaction by explicitly using <code>.call</code>:</p>
<pre><code class="lang-javascript">const value = await instance.setValue.call(5);
</code></pre>
<p>This isn&#39;t very useful in this case, since <code>setValue()</code> sets things, and the value we pass won&#39;t be saved since we&#39;re not creating a transaction.</p>

    <h4 class="link-markdown">
      <a href="#calling-getters" name="calling-getters"><i class="fas fa-link"></i></a>
      Calling getters
    </h4>
  <p>However, we can <em>get</em> the value using <code>getValue()</code>, using <code>.call()</code>. Calls are always free and don&#39;t cost any Ether, so they&#39;re good for calling functions that read data off the blockchain:</p>
<pre><code class="lang-javascript">const value = await instance.getValue.call();
// value reprsents the `value` storage object in the solidity contract
// since the contract returns that value.
</code></pre>
<p>Even more helpful, however is we <em>don&#39;t even need</em> to use <code>.call</code> when a function is marked as <code>constant</code>, because <code>truffle-contract</code> will automatically know that that function can only be interacted with via a call:</p>
<pre><code class="lang-javascript">const value = await instance.getValue();
// val reprsents the `value` storage object in the solidity contract
// since the contract returns that value.
</code></pre>

    <h4 class="link-markdown">
      <a href="#processing-transaction-results" name="processing-transaction-results"><i class="fas fa-link"></i></a>
      Processing transaction results
    </h4>
  <p>When you make a transaction, you&#39;re given a <code>result</code> object that gives you a wealth of information about the transaction. You&#39;re given the transaction has (<code>result.tx</code>), the decoded events (also known as logs; <code>result.logs</code>), and a transaction receipt (<code>result.receipt</code>). In the below example, you&#39;ll recieve the <code>ValueSet()</code> event because you triggered the event using the <code>setValue()</code> function:</p>
<pre><code class="lang-javascript">const result = await instance.setValue(5);
// result.tx =&gt; transaction hash, string
// result.logs =&gt; array of trigger events (1 item in this case)
// result.receipt =&gt; receipt object
</code></pre>

    <h4 class="link-markdown">
      <a href="#sending-ether-triggering-the-fallback-function" name="sending-ether-triggering-the-fallback-function"><i class="fas fa-link"></i></a>
      Sending Ether / Triggering the fallback function
    </h4>
  <p>You can trigger the fallback function by sending a transaction to this function:</p>
<pre><code class="lang-javascript">const result = instance.sendTransaction({...});
// Same result object as above.
</code></pre>
<p>This is promisified like all available contract instance functions, and has the same API as <code>web3.eth.sendTransaction</code> without the callback. The <code>to</code> value will be automatically filled in for you.</p>
<p>If you only want to send Ether to the contract a shorthand is available:</p>
<pre><code class="lang-javascript">const result = await instance.send(web3.toWei(1, &quot;ether&quot;));
// Same result object as above.
</code></pre>

    <h4 class="link-markdown">
      <a href="#estimating-gas-usage" name="estimating-gas-usage"><i class="fas fa-link"></i></a>
      Estimating gas usage
    </h4>
  <p>Run this function to estimate the gas usage:</p>
<pre><code class="lang-javascript">const result = instance.setValue.estimateGas(5);
// result =&gt; estimated gas for this transaction
</code></pre>


          <div class="contribute-link">
            See a way to make this page better? <a href="https://github.com/trufflesuite/trufflesuite.com/edit/master/src/docs/truffle/reference">Edit here &raquo;</a>
          </div>        </div>
      </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="/js/vendor/jquery-3.2.1.slim.min.js"><\/script>')</script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/vendor/prism.js"></script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script src="/js/docs.js"></script>
    <script src="https://unpkg.com/lunr/lunr.js"></script>
    <script src="/js/docs-search.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-83874933-3', 'auto');
      ga('send', 'pageview');
    </script>  </body>
</html>