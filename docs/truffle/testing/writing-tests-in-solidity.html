<!DOCTYPE html>
<html>
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WHT4PS2');</script>
  <!-- End Google Tag Manager -->
  
  <!-- HubSpot Forms -->
  <!--[if lte IE 8]>
    <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2-legacy.js"></script>
  <![endif]-->
  <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>  <!-- Start of HubSpot Embed Code -->
  <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/5258293.js"></script>
  <!-- End of HubSpot Embed Code -->  
  <meta charset="utf-8">
  <meta name="description" content="The Truffle suite of tools make dapp development easier and more consistent.">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <!-- Favicon -->
  <link rel="icon" href="/img/favicons/favicon.ico">

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="Truffle Suite">
  <link rel="icon" sizes="192x192" href="/img/favicons/chrome-touch-icon-192x192.png">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Truffle Suite">
  <link rel="apple-touch-icon" href="/img/favicons/apple-touch-icon.png">

  <!-- Tile icon for Win8/10 (144x144 + tile color) -->
  <meta name="msapplication-TileImage" content="img/favicons/ms-touch-icon-144x144-precomposed.png">
  <meta name="msapplication-TileColor" content="#3372DF">

  <!-- Facebook OpenGraph -->
  <meta property="og:site_name" content="Truffle Suite" />
  <meta property="og:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
  <meta property="og:title" content="Truffle | Writing Tests in Solidity | Documentation | Truffle Suite" />
  <meta property="og:url" content="https://trufflesuite.com/docs/truffle/testing/writing-tests-in-solidity" />
  <meta property="og:type" content="article" />
  <meta property="og:image" content="https://truffleframework.com/img/favicons/truffle-share.png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="Truffle Suite" />
  <meta name="twitter:title" content="Truffle | Writing Tests in Solidity | Documentation | Truffle Suite" />
  <meta name="twitter:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
  <meta name="twitter:creator" content="Truffle Suite" />
  <meta name="twitter:domain" content="trufflesuite.com" />
  <meta name="twitter:image:src" content="https://truffleframework.com/img/favicons/truffle-share.png" />
  
  <meta name="google-site-verification" content="BSgPkMHzw7IxJTpEElNfD8ZZYPzXgOQiTVPzAxAG8-o" />

  <title>Truffle | Writing Tests in Solidity | Documentation | Truffle Suite</title>

  <link href="https://fonts.googleapis.com/css?family=Grand+Hotel|Open+Sans|Oswald|Varela+Round|Roboto+Condensed|Roboto+Mono" rel="stylesheet">
  <script src="https://kit.fontawesome.com/371f2d7a8a.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/css/index.css?1591378895616">
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WHT4PS2"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <nav class="navbar navbar-expand-md navbar-dark fixed-top" id="primaryNav">
    <a class="navbar-brand current" href="/">
      <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" />TRUFFLE SUITE
    </a>
  
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="suiteDropdown" href="#" data-toggle="dropdown">SUITE</a>
  
          <div class="dropdown-menu">
            <a class="text-truffle" href="/teams">
              <img class="suite-logo" src="/img/tt-logomark.svg" alt="Truffle Teams Logo" /><span class="narrow">T</span>RUFFLE TEAMS
            </a>
            <a class="text-truffle" href="/truffle">
              <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><span class="narrow">T</span>RUFFLE
            </a>
            <a class="text-ganache" href="/ganache">
              <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" />Ganache
            </a>
            <a class="text-drizzle" href="/drizzle">
              <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" />dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le
            </a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/docs">DOCS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/tutorials">TUTORIALS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/boxes">BOXES</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog">BLOG</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/events">EVENTS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/community">COMMUNITY</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/university">UNIVERSITY</a>
        </li>
      </ul>
    </div>
  </nav>  
  <main role="main" class="container-fluid">
    <!--<div class="row pt-4 pb-4">
      <div class="col">
        <form>
          <div class="row">
            <div class="col">
              <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="ðŸ” Search">
            </div>
            <div class="col">
              <select id="inputState" class="form-control">
                <option selected>4.1</option>
                <option>4.0.6</option>
                <option>4.0.5</option>
              </select>
            </div>
            <div class="col">
              <button type="submit" class="btn btn-truffle">SEARCH</button>
            </div>
          </div>
        </form>
      </div>
    </div>-->

    

    <div class="row row-docs-main">
      <!-- Show the sidebar *only if* we're not directly under /docs (e.g., index, search). --> 

          <aside class="col-lg-3 docs-sidebar" id="docsSidebar">
            <h2 class="space-icon d-lg-none text-center" id="docsSidebarToggle"><i class="fas fa-book"></i> SEARCH &amp; CONTENTS</h2>
          
            <div class="docs-top-nav">
              <a href="/docs">
                <div class="docs-back-button">
                  <i class="fad fa-arrow-square-left"></i>
                </div>
                Ethereum & EVM-based chains
              </a>
            </div>
          
            <div class="docs-wrapper">
          
              <form class="mb-4" id="searchForm">
                <div class="input-group">
                  <input type="text" class="form-control" id="searchInput" placeholder="Search">
                  <div class="input-group-append">
                    <button type="submit" class="btn btn-truffle">SEARCH</button>
                  </div>
                </div>
              </form>
          
              <a class="toggle-teams suite-link" href="#teamsDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/tt-logomark.svg" alt="Truffle Teams Logo" /><h2 class="text-truffle">TRUFFLE TEAMS</h2>
              </a>
          
              <div class="collapse teams " id="teamsDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/teams/overview"><li>Overview</li></a>
                  <a href="/docs/teams/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Getting Started</h3>
                  <ul>
                      <a href="/docs/teams/getting-started/creating-an-account"><li>Creating an Account</li></a>
                      <a href="/docs/teams/getting-started/adding-repositories"><li>Adding Repositories</li></a>
                  </ul>
                  <h3>Testing</h3>
                  <ul>
                      <a href="/docs/teams/testing/starting-builds"><li>Starting Builds</li></a>
                      <a href="/docs/teams/testing/external-ci"><li>External CI</li></a>
                  </ul>
                  <h3>Deployments</h3>
                  <ul>
                      <a href="/docs/teams/deployments/deploying-contracts"><li>Deploying Contracts</li></a>
                      <a href="/docs/teams/deployments/sandboxes"><li>Sandboxes</li></a>
                  </ul>
                  <h3>Contracts</h3>
                  <ul>
                      <a href="/docs/teams/contracts/contract-monitoring"><li>Contract Monitoring</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/teams/reference/permissions-disclosure"><li>Permissions Disclosure</li></a>
                  </ul>
              </div>
          
              <a class="toggle-truffle suite-link" href="#truffleDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><h2 class="text-truffle"><span class="narrow">T</span>RUFFLE</h2>
              </a>
          
              <div class="collapse truffle show" id="truffleDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/truffle/overview"><li>Overview</li></a>
                  <a href="/docs/truffle/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Getting Started</h3>
                  <ul>
                      <a href="/docs/truffle/getting-started/installation"><li>Installation</li></a>
                      <a href="/docs/truffle/getting-started/creating-a-project"><li>Creating a Project</li></a>
                      <a href="/docs/truffle/getting-started/compiling-contracts"><li>Compiling Contracts</li></a>
                      <a href="/docs/truffle/getting-started/running-migrations"><li>Running Migrations</li></a>
                      <a href="/docs/truffle/getting-started/interacting-with-your-contracts"><li>Interacting with Your Contracts</li></a>
                      <a href="/docs/truffle/getting-started/truffle-with-metamask"><li>Truffle with MetaMask</li></a>
                      <a href="/docs/truffle/getting-started/package-management-via-ethpm"><li>Package Management via EthPM</li></a>
                      <a href="/docs/truffle/getting-started/package-management-via-npm"><li>Package Management via NPM</li></a>
                      <a href="/docs/truffle/getting-started/debugging-your-contracts"><li>Debugging Your Contracts</li></a>
                      <a href="/docs/truffle/getting-started/using-truffle-develop-and-the-console"><li>Using Truffle Develop and The Console</li></a>
                      <a href="/docs/truffle/getting-started/writing-external-scripts"><li>Writing External Scripts</li></a>
                  </ul>
                  <h3>Testing</h3>
                  <ul>
                      <a href="/docs/truffle/testing/testing-your-contracts"><li>Testing Your Contracts</li></a>
                      <a href="/docs/truffle/testing/writing-tests-in-javascript"><li>Writing Tests in JavaScript</li></a>
                      <a href="/docs/truffle/testing/writing-tests-in-solidity"><li>Writing Tests in Solidity</li></a>
                  </ul>
                  <h3>Distributed Ledger Support</h3>
                  <ul>
                      <a href="/docs/truffle/distributed-ledger-support/working-with-quorum"><li>Working With Quorum</li></a>
                      <a href="/docs/truffle/distributed-ledger-support/working-with-hyperledger-evm"><li>Working With Hyperledger EVM</li></a>
                  </ul>
                  <h3>Advanced</h3>
                  <ul>
                      <a href="/docs/truffle/advanced/networks-and-app-deployment"><li>Networks and App Deployment</li></a>
                      <a href="/docs/truffle/advanced/build-processes"><li>Build Processes</li></a>
                      <a href="/docs/truffle/advanced/creating-a-truffle-box"><li>Creating a Truffle Box</li></a>
                      <a href="/docs/truffle/advanced/event-system"><li>Event System</li></a>
                      <a href="/docs/truffle/advanced/ethereum-name-service"><li>Ethereum Name Service</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/truffle/reference/choosing-an-ethereum-client"><li>Choosing an Ethereum Client</li></a>
                      <a href="/docs/truffle/reference/configuration"><li>Configuration</li></a>
                      <a href="/docs/truffle/reference/contract-abstractions"><li>Contract Abstractions</li></a>
                      <a href="/docs/truffle/reference/truffle-commands"><li>Truffle Commands</li></a>
                      <a href="/docs/truffle/reference/contact-the-developers"><li>Contact The Developers</li></a>
                  </ul>
              </div>
          
              <a class="toggle-ganache suite-link" href="#ganacheDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" /><h2 class="text-ganache">Ganache</h2>
              </a>
              
              <div class="collapse ganache " id="ganacheDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/ganache/overview"><li>Overview</li></a>
                  <a href="/docs/ganache/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Workspaces</h3>
                  <ul>
                      <a href="/docs/ganache/workspaces/the-quickstart-workspace"><li>The Quickstart Workspace</li></a>
                      <a href="/docs/ganache/workspaces/creating-workspaces"><li>Creating Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/loading-existing-workspaces"><li>Loading Existing Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/switching-workspaces"><li>Switching Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/deleting-workspaces"><li>Deleting Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/editing-workspaces"><li>Editing Workspaces</li></a>
                  </ul>
                  <h3>Truffle Projects</h3>
                  <ul>
                      <a href="/docs/ganache/truffle-projects/linking-a-truffle-project"><li>Linking a Truffle Project</li></a>
                      <a href="/docs/ganache/truffle-projects/unlinking-a-truffle-project"><li>Unlinking a Truffle Project</li></a>
                      <a href="/docs/ganache/truffle-projects/contracts-page"><li>Contracts Page</li></a>
                      <a href="/docs/ganache/truffle-projects/events-page"><li>Events Page</li></a>
                      <a href="/docs/ganache/truffle-projects/decoded-transactions"><li>Decoded Transactions</li></a>
                  </ul>
                  <h3>Corda</h3>
                  <ul>
                      <a href="/docs/ganache/corda/working-with-corda"><li>Working with Corda</li></a>
                      <a href="/docs/ganache/corda/workspace-overview"><li>Workspace Overview</li></a>
                      <a href="/docs/ganache/corda/linking-a-corda-project"><li>Linking a Corda Project</li></a>
                      <a href="/docs/ganache/corda/unlinking-a-corda-project"><li>Unlinking a Corda Project</li></a>
                      <a href="/docs/ganache/corda/nodes"><li>Nodes</li></a>
                      <a href="/docs/ganache/corda/transactions"><li>Transactions</li></a>
                      <a href="/docs/ganache/corda/cordapps"><li>CorDapps</li></a>
                      <a href="/docs/ganache/corda/shell"><li>Shell</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/ganache/reference/ganache-settings"><li>Ganache Settings</li></a>
                      <a href="/docs/ganache/reference/workspace-default-configuration"><li>Workspace Default Configuration</li></a>
                  </ul>
              </div>
          
              <a class="toggle-drizzle suite-link" href="#drizzleDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" /><h2 class="text-drizzle">dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le</h2>
              </a>
              
              <div class="collapse drizzle " id="drizzleDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/drizzle/overview"><li>Overview</li></a>
                  <a href="/docs/drizzle/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Getting Started</h3>
                  <ul>
                      <a href="/docs/drizzle/getting-started/using-drizzles-redux-store"><li>Using Drizzle&#x27;s Redux Store</li></a>
                      <a href="/docs/drizzle/getting-started/contract-interaction"><li>Contract Interaction</li></a>
                  </ul>
                  <h3>React</h3>
                  <ul>
                      <a href="/docs/drizzle/react/react-integration"><li>React Integration</li></a>
                      <a href="/docs/drizzle/react/react-components"><li>React Components</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/drizzle/reference/drizzle-options"><li>Drizzle Options</li></a>
                      <a href="/docs/drizzle/reference/drizzle-state"><li>Drizzle State</li></a>
                      <a href="/docs/drizzle/reference/drizzle-actions"><li>Drizzle Actions</li></a>
                      <a href="/docs/drizzle/reference/how-data-stays-fresh"><li>How Data Stays Fresh</li></a>
                  </ul>
              </div>
            </div>
          </aside>      
        <div class="col-lg-9 bd-light-cream docs-content">
          
    <h1 class="link-markdown">
      <a class="anchor-target" name="writing-tests-in-solidity"></a>
      <a href="#writing-tests-in-solidity"><i class="fas fa-link"></i></a>
      Writing Tests in Solidity
    </h1>
  <p>Solidity test contracts live alongside Javascript tests as <code>.sol</code> files. When <code>truffle test</code> is run, they will be included as a separate test suite per test contract. These contracts maintain all the benefits of the Javascript tests: namely a <a href="/docs/getting_started/testing#clean-room-environment">clean-room environment</a> per test suite, direct access to your deployed contracts and the ability to import any contract dependency. In addition to these features, Truffle&#39;s Solidity testing framework was built with the following issues in mind:</p>
<ul>
<li>Solidity tests shouldn&#39;t extend from any contract (like a <code>Test</code> contract). This makes your tests as minimal as possible and gives you complete control over the contracts you write.</li>
<li>Solidity tests shouldn&#39;t be beholden to any assertion library. Truffle provides a default assertion library for you, but you can change this library at any time to fit your needs.</li>
<li>You should be able to run your Solidity tests against any Ethereum client.</li>
</ul>

    <h2 class="link-markdown">
      <a class="anchor-target" name="example"></a>
      <a href="#example"><i class="fas fa-link"></i></a>
      Example
    </h2>
  <p>Let&#39;s take a look at an example Solidity test before diving too deeply. Here&#39;s the example Solidity test provided for you by <code>truffle unbox metacoin</code>:</p>
<pre><code class="language-solidity">pragma solidity &gt;=0.4.25 &lt;0.6.0;

import &quot;truffle/Assert.sol&quot;;
import &quot;truffle/DeployedAddresses.sol&quot;;
import &quot;../contracts/MetaCoin.sol&quot;;

contract TestMetaCoin {
  function testInitialBalanceUsingDeployedContract() {
    MetaCoin meta = MetaCoin(DeployedAddresses.MetaCoin());

    uint expected = 10000;

    Assert.equal(meta.getBalance(tx.origin), expected, &quot;Owner should have 10000 MetaCoin initially&quot;);
  }

  function testInitialBalanceWithNewMetaCoin() {
    MetaCoin meta = new MetaCoin();

    uint expected = 10000;

    Assert.equal(meta.getBalance(tx.origin), expected, &quot;Owner should have 10000 MetaCoin initially&quot;);
  }
}</code></pre>
<p>This produces the following output:</p>
<pre><code>$ truffle test

Compiling your contracts...
===========================
&gt; Compiling ./contracts/ConvertLib.sol
&gt; Compiling ./contracts/MetaCoin.sol
&gt; Compiling ./contracts/Migrations.sol
&gt; Compiling ./test/TestMetaCoin.sol



  TestMetaCoin
    âœ“ testInitialBalanceUsingDeployedContract (79ms)
    âœ“ testInitialBalanceWithNewMetaCoin (65ms)

  Contract: MetaCoin
    âœ“ should put 10000 MetaCoin in the first account (38ms)
    âœ“ should call a function that depends on a linked library (42ms)
    âœ“ should send coin correctly (120ms)


  5 passing (7s)</code></pre><p>From the output, you can see reports from two different test files: one
JavaScript (Contract: MetaCoin above) and one Solidity (TestMetaCoin above).
In this document we will be concerning ourselves exclusively with the
Solidity test.</p>

    <h2 class="link-markdown">
      <a class="anchor-target" name="test-structure"></a>
      <a href="#test-structure"><i class="fas fa-link"></i></a>
      Test structure
    </h2>
  <p>To better understand whats happening, let&#39;s discuss things in more detail.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="assertions"></a>
      <a href="#assertions"><i class="fas fa-link"></i></a>
      Assertions
    </h3>
  <p>Your assertion functions like <code>Assert.equal()</code> are provided to you by the <code>truffle/Assert.sol</code> library. This is the default assertion library, however you can include your own assertion library so long as the library loosely integrates with Truffle&#39;s test runner by triggering the correct assertion events. You can find all available assertion functions in <a href="https://github.com/trufflesuite/truffle/blob/develop/packages/core/lib/testing/Assert.sol">Assert.sol</a>.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="deployed-addresses"></a>
      <a href="#deployed-addresses"><i class="fas fa-link"></i></a>
      Deployed addresses
    </h3>
  <p>The addresses of your deployed contracts (i.e., contracts that were deployed as part of your migrations) are available through the <code>truffle/DeployedAddresses.sol</code> library. This is provided by Truffle and is recompiled and relinked before each suite is run to provide your tests with Truffle&#39;s a clean room environment. This library provides functions for all of your deployed contracts, in the form of:</p>
<pre><code class="language-solidity">DeployedAddresses.&lt;contract name&gt;();</code></pre>
<p>This will return an address that you can then use to access that contract. See the example test above for usage.</p>
<p>In order to use the deployed contract, you&#39;ll have to import the contract code into your test suite. Notice <code>import &quot;../contracts/MetaCoin.sol&quot;;</code> in the example. This import is relative to the test contract, which exists in the <code>./test</code> directory, and it goes outside of the test directory in order to find the MetaCoin contract. It then uses that contract to cast the address to the <code>MetaCoin</code> type.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="test-contract-names"></a>
      <a href="#test-contract-names"><i class="fas fa-link"></i></a>
      Test contract names
    </h3>
  <p>All test contracts must start with <code>Test</code>, using an uppercase <code>T</code>. This distinguishes this contract apart from test helpers and project contracts (i.e., the contracts under test), letting the test runner know which contracts represent test suites.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="test-function-names"></a>
      <a href="#test-function-names"><i class="fas fa-link"></i></a>
      Test function names
    </h3>
  <p>Like test contract names, all test functions must start with <code>test</code>, lowercase. Each test function is executed as a single transaction, in order of appearance in the test file (like your Javascript tests). Assertion functions provided by <code>truffle/Assert.sol</code> trigger events that the test runner evaluates to determine the result of the test. Assertion functions return a boolean representing the outcome of the assertion which you can use to return from the test early to prevent execution errors (as in, errors that <a href="/ganache">Ganache</a> or Truffle Develop will expose).</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="before-after-hooks"></a>
      <a href="#before-after-hooks"><i class="fas fa-link"></i></a>
      before / after hooks
    </h3>
  <p>You are provided many test hooks, shown in the example below. These hooks are <code>beforeAll</code>, <code>beforeEach</code>, <code>afterAll</code> and <code>afterEach</code>, which are the same hooks provided by Mocha in your Javascript tests. You can use these hooks to perform setup and teardown actions before and after each test, or before and after each suite is run. Like test functions, each hook is executed as a single transaction. Note that some complex tests will need to perform a significant amount of setup that might overflow the gas limit of a single transaction; you can get around this limitation by creating many hooks with different suffixes, like in the example below:</p>
<pre><code class="language-solidity">import &quot;truffle/Assert.sol&quot;;

contract TestHooks {
  uint someValue;

  function beforeEach() {
    someValue = 5;
  }

  function beforeEachAgain() {
    someValue += 1;
  }

  function testSomeValueIsSix() {
    uint expected = 6;

    Assert.equal(someValue, expected, &quot;someValue should have been 6&quot;);
  }
}</code></pre>
<p>This test contract also shows that your test functions and hook functions all share the same contract state. You can setup contract data before the test, use that data during the test, and reset it afterward in preparation for the next one. Note that just like your Javascript tests, your next test function will continue from the state of the previous test function that ran.</p>

    <h2 class="link-markdown">
      <a class="anchor-target" name="advanced-features"></a>
      <a href="#advanced-features"><i class="fas fa-link"></i></a>
      Advanced features
    </h2>
  <p>Solidity tests come with a few advanced features to let you test specific use cases within Solidity.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="testing-for-exceptions"></a>
      <a href="#testing-for-exceptions"><i class="fas fa-link"></i></a>
      Testing for exceptions
    </h3>
  <p>You can easily test if your contract should or shouldn&#39;t raise an exception (i.e., for <code>require()</code>/<code>assert()</code>/<code>revert()</code> statements; <code>throw</code> on previous versions of Solidity).</p>
<p>This topic was first written about by guest writer Simon de la Rouviere in <a href="/tutorials/testing-for-throws-in-solidity-tests">his tutorial Testing for Throws in Truffle Solidity Tests</a>.  N.B. that the tutorial makes heavy use of exceptions via the deprecated keyword <code>throw</code>, replaced by <code>revert()</code>, <code>require()</code>, and <code>assert()</code> starting in Solidity v0.4.13.</p>
<p>Also, since Solidity v0.4.17, a function type member was added to enable you to access a function selector (e.g.: <code>this.f.selector</code>), and so, testing for throws with external calls has been made much easier:</p>
<pre><code class="language-solidity">pragma solidity ^0.5.0;

import &quot;truffle/Assert.sol&quot;;

contract TestBytesLib2 {
    function testThrowFunctions() public {
        bool r;

        // We&#39;re basically calling our contract externally with a raw call, forwarding all available gas, with
        // msg.data equal to the throwing function selector that we want to be sure throws and using only the boolean
        // value associated with the message call&#39;s success
        (r, ) = address(this).call(abi.encodePacked(this.IThrow1.selector));
        Assert.isFalse(r, &quot;If this is true, something is broken!&quot;);

        (r, ) = address(this).call(abi.encodePacked(this.IThrow2.selector));
        Assert.isFalse(r, &quot;What?! 1 is equal to 10?&quot;);
    }

    function IThrow1() public pure {
        revert(&quot;I will throw&quot;);
    }

    function IThrow2() public pure {
        require(1 == 10, &quot;I will throw, too!&quot;);
    }
}</code></pre>

    <h3 class="link-markdown">
      <a class="anchor-target" name="testing-ether-transactions"></a>
      <a href="#testing-ether-transactions"><i class="fas fa-link"></i></a>
      Testing ether transactions
    </h3>
  <p>You can also test how your contracts react to receiving Ether, and script that interaction within Solidity. To do so, your Solidity test should have a public function that returns a <code>uint</code>, called <code>initialBalance</code>. This can be written directly as a function or a public variable, as shown below. When your test contract is deployed to the network, Truffle will send that amount of Ether from your test account to your test contract. Your test contract can then use that Ether to script Ether interactions within your contract under test. Note that <code>initialBalance</code> is optional and not required.</p>
<pre><code class="language-solidity">import &quot;truffle/Assert.sol&quot;;
import &quot;truffle/DeployedAddresses.sol&quot;;
import &quot;../contracts/MyContract.sol&quot;;

contract TestContract {
  // Truffle will send the TestContract one Ether after deploying the contract.
  uint public initialBalance = 1 ether;

  function testInitialBalanceUsingDeployedContract() {
    MyContract myContract = MyContract(DeployedAddresses.MyContract());

    // perform an action which sends value to myContract, then assert.
    myContract.send(...);
  }

  function () {
    // This will NOT be executed when Ether is sent. \o/
  }
}</code></pre>
<p>Note that Truffle sends Ether to your test contract in a way that does <strong>not</strong> execute a fallback function, so you can still use the fallback function within your Solidity tests for advanced test cases.</p>


          <div class="contribute-link">
            See a way to make this page better? <a href="https://github.com/trufflesuite/trufflesuite.com/edit/master/src/docs/truffle/testing">Edit here &raquo;</a>
          </div>        </div>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="/js/vendor/jquery-3.2.1.slim.min.js"><\/script>')</script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/vendor/prism.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script src="/js/docs.js"></script>
  <script src="https://unpkg.com/lunr/lunr.js"></script>
  <script src="/js/docs-search.js"></script>
</body>
</html>