<!DOCTYPE html>
<html>
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WHT4PS2');</script>
  <!-- End Google Tag Manager -->
  
  <!-- HubSpot Forms -->
  <!--[if lte IE 8]>
    <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2-legacy.js"></script>
  <![endif]-->
  <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>  <!-- Start of HubSpot Embed Code -->
  <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/5258293.js"></script>
  <!-- End of HubSpot Embed Code -->  
  <meta charset="utf-8">
  <meta name="description" content="The Truffle suite of tools make dapp development easier and more consistent.">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <!-- Favicon -->
  <link rel="icon" href="/img/favicons/favicon.ico">

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="Truffle Suite">
  <link rel="icon" sizes="192x192" href="/img/favicons/chrome-touch-icon-192x192.png">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Truffle Suite">
  <link rel="apple-touch-icon" href="/img/favicons/apple-touch-icon.png">

  <!-- Tile icon for Win8/10 (144x144 + tile color) -->
  <meta name="msapplication-TileImage" content="img/favicons/ms-touch-icon-144x144-precomposed.png">
  <meta name="msapplication-TileColor" content="#3372DF">

  <!-- Facebook OpenGraph -->
  <meta property="og:site_name" content="Truffle Suite" />
  <meta property="og:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
  <meta property="og:title" content="Truffle | Debugging Your Contracts | Documentation | Truffle Suite" />
  <meta property="og:url" content="https://trufflesuite.com/docs/truffle/getting-started/debugging-your-contracts" />
  <meta property="og:type" content="article" />
  <meta property="og:image" content="https://truffleframework.com/img/favicons/truffle-share.png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="Truffle Suite" />
  <meta name="twitter:title" content="Truffle | Debugging Your Contracts | Documentation | Truffle Suite" />
  <meta name="twitter:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
  <meta name="twitter:creator" content="Truffle Suite" />
  <meta name="twitter:domain" content="trufflesuite.com" />
  <meta name="twitter:image:src" content="https://truffleframework.com/img/favicons/truffle-share.png" />
  
  <meta name="google-site-verification" content="BSgPkMHzw7IxJTpEElNfD8ZZYPzXgOQiTVPzAxAG8-o" />

  <title>Truffle | Debugging Your Contracts | Documentation | Truffle Suite</title>

  <link href="https://fonts.googleapis.com/css?family=Grand+Hotel|Open+Sans|Oswald|Varela+Round|Roboto+Condensed|Roboto+Mono" rel="stylesheet">
  <script src="https://kit.fontawesome.com/371f2d7a8a.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/css/index.css?1594997581125">
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WHT4PS2"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <nav class="navbar navbar-expand-md navbar-dark fixed-top" id="primaryNav">
    <a class="navbar-brand current" href="/">
      <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" />TRUFFLE SUITE
    </a>
  
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="suiteDropdown" href="#" data-toggle="dropdown">SUITE</a>
  
          <div class="dropdown-menu">
            <a class="text-truffle" href="/teams">
              <img class="suite-logo" src="/img/tt-logomark.svg" alt="Truffle Teams Logo" /><span class="narrow">T</span>RUFFLE TEAMS
            </a>
            <a class="text-truffle" href="/truffle">
              <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><span class="narrow">T</span>RUFFLE
            </a>
            <a class="text-ganache" href="/ganache">
              <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" />Ganache
            </a>
            <a class="text-drizzle" href="/drizzle">
              <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" />dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le
            </a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/docs">DOCS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/tutorials">TUTORIALS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/boxes">BOXES</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog">BLOG</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/events">EVENTS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/community">COMMUNITY</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/university">UNIVERSITY</a>
        </li>
      </ul>
    </div>
  </nav>  
  <main role="main" class="container-fluid">
    <!--<div class="row pt-4 pb-4">
      <div class="col">
        <form>
          <div class="row">
            <div class="col">
              <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="ðŸ” Search">
            </div>
            <div class="col">
              <select id="inputState" class="form-control">
                <option selected>4.1</option>
                <option>4.0.6</option>
                <option>4.0.5</option>
              </select>
            </div>
            <div class="col">
              <button type="submit" class="btn btn-truffle">SEARCH</button>
            </div>
          </div>
        </form>
      </div>
    </div>-->

    

    <div class="row row-docs-main">
      <!-- Show the sidebar *only if* we're not directly under /docs (e.g., index, search). --> 

          <aside class="col-lg-3 docs-sidebar" id="docsSidebar">
            <h2 class="space-icon d-lg-none text-center" id="docsSidebarToggle"><i class="fas fa-book"></i> SEARCH &amp; CONTENTS</h2>
          
            <div class="docs-top-nav">
              <a href="/docs">
                <div class="docs-back-button">
                  <i class="fad fa-arrow-square-left"></i>
                </div>
                Ethereum & EVM-based chains
              </a>
            </div>
          
            <div class="docs-wrapper">
          
              <form class="mb-4" id="searchForm">
                <div class="input-group">
                  <input type="text" class="form-control" id="searchInput" placeholder="Search">
                  <div class="input-group-append">
                    <button type="submit" class="btn btn-truffle">SEARCH</button>
                  </div>
                </div>
              </form>
          
              <a class="toggle-teams suite-link" href="#teamsDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/tt-logomark.svg" alt="Truffle Teams Logo" /><h2 class="text-truffle">TRUFFLE TEAMS</h2>
              </a>
          
              <div class="collapse teams " id="teamsDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/teams/overview"><li>Overview</li></a>
                  <a href="/docs/teams/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Getting Started</h3>
                  <ul>
                      <a href="/docs/teams/getting-started/creating-an-account"><li>Creating an Account</li></a>
                      <a href="/docs/teams/getting-started/adding-repositories"><li>Adding Repositories</li></a>
                  </ul>
                  <h3>Testing</h3>
                  <ul>
                      <a href="/docs/teams/testing/starting-builds"><li>Starting Builds</li></a>
                      <a href="/docs/teams/testing/external-ci"><li>External CI</li></a>
                  </ul>
                  <h3>Deployments</h3>
                  <ul>
                      <a href="/docs/teams/deployments/deploying-contracts"><li>Deploying Contracts</li></a>
                      <a href="/docs/teams/deployments/sandboxes"><li>Sandboxes</li></a>
                  </ul>
                  <h3>Contracts</h3>
                  <ul>
                      <a href="/docs/teams/contracts/contract-monitoring"><li>Contract Monitoring</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/teams/reference/permissions-disclosure"><li>Permissions Disclosure</li></a>
                  </ul>
              </div>
          
              <a class="toggle-truffle suite-link" href="#truffleDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><h2 class="text-truffle"><span class="narrow">T</span>RUFFLE</h2>
              </a>
          
              <div class="collapse truffle show" id="truffleDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/truffle/overview"><li>Overview</li></a>
                  <a href="/docs/truffle/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Getting Started</h3>
                  <ul>
                      <a href="/docs/truffle/getting-started/installation"><li>Installation</li></a>
                      <a href="/docs/truffle/getting-started/creating-a-project"><li>Creating a Project</li></a>
                      <a href="/docs/truffle/getting-started/compiling-contracts"><li>Compiling Contracts</li></a>
                      <a href="/docs/truffle/getting-started/running-migrations"><li>Running Migrations</li></a>
                      <a href="/docs/truffle/getting-started/interacting-with-your-contracts"><li>Interacting with Your Contracts</li></a>
                      <a href="/docs/truffle/getting-started/truffle-with-metamask"><li>Truffle with MetaMask</li></a>
                      <a href="/docs/truffle/getting-started/package-management-via-ethpm"><li>Package Management via EthPM</li></a>
                      <a href="/docs/truffle/getting-started/package-management-via-npm"><li>Package Management via NPM</li></a>
                      <a href="/docs/truffle/getting-started/debugging-your-contracts"><li>Debugging Your Contracts</li></a>
                      <a href="/docs/truffle/getting-started/using-truffle-develop-and-the-console"><li>Using Truffle Develop and The Console</li></a>
                      <a href="/docs/truffle/getting-started/writing-external-scripts"><li>Writing External Scripts</li></a>
                  </ul>
                  <h3>Testing</h3>
                  <ul>
                      <a href="/docs/truffle/testing/testing-your-contracts"><li>Testing Your Contracts</li></a>
                      <a href="/docs/truffle/testing/writing-tests-in-javascript"><li>Writing Tests in JavaScript</li></a>
                      <a href="/docs/truffle/testing/writing-tests-in-solidity"><li>Writing Tests in Solidity</li></a>
                  </ul>
                  <h3>Distributed Ledger Support</h3>
                  <ul>
                      <a href="/docs/truffle/distributed-ledger-support/working-with-quorum"><li>Working With Quorum</li></a>
                      <a href="/docs/truffle/distributed-ledger-support/working-with-hyperledger-evm"><li>Working With Hyperledger EVM</li></a>
                  </ul>
                  <h3>Advanced</h3>
                  <ul>
                      <a href="/docs/truffle/advanced/networks-and-app-deployment"><li>Networks and App Deployment</li></a>
                      <a href="/docs/truffle/advanced/build-processes"><li>Build Processes</li></a>
                      <a href="/docs/truffle/advanced/creating-a-truffle-box"><li>Creating a Truffle Box</li></a>
                      <a href="/docs/truffle/advanced/event-system"><li>Event System</li></a>
                      <a href="/docs/truffle/advanced/ethereum-name-service"><li>Ethereum Name Service</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/truffle/reference/choosing-an-ethereum-client"><li>Choosing an Ethereum Client</li></a>
                      <a href="/docs/truffle/reference/configuration"><li>Configuration</li></a>
                      <a href="/docs/truffle/reference/contract-abstractions"><li>Contract Abstractions</li></a>
                      <a href="/docs/truffle/reference/truffle-commands"><li>Truffle Commands</li></a>
                      <a href="/docs/truffle/reference/contact-the-developers"><li>Contact The Developers</li></a>
                  </ul>
              </div>
          
              <a class="toggle-ganache suite-link" href="#ganacheDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" /><h2 class="text-ganache">Ganache</h2>
              </a>
              
              <div class="collapse ganache " id="ganacheDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/ganache/overview"><li>Overview</li></a>
                  <a href="/docs/ganache/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Workspaces</h3>
                  <ul>
                      <a href="/docs/ganache/workspaces/the-quickstart-workspace"><li>The Quickstart Workspace</li></a>
                      <a href="/docs/ganache/workspaces/creating-workspaces"><li>Creating Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/loading-existing-workspaces"><li>Loading Existing Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/switching-workspaces"><li>Switching Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/deleting-workspaces"><li>Deleting Workspaces</li></a>
                      <a href="/docs/ganache/workspaces/editing-workspaces"><li>Editing Workspaces</li></a>
                  </ul>
                  <h3>Truffle Projects</h3>
                  <ul>
                      <a href="/docs/ganache/truffle-projects/linking-a-truffle-project"><li>Linking a Truffle Project</li></a>
                      <a href="/docs/ganache/truffle-projects/unlinking-a-truffle-project"><li>Unlinking a Truffle Project</li></a>
                      <a href="/docs/ganache/truffle-projects/contracts-page"><li>Contracts Page</li></a>
                      <a href="/docs/ganache/truffle-projects/events-page"><li>Events Page</li></a>
                      <a href="/docs/ganache/truffle-projects/decoded-transactions"><li>Decoded Transactions</li></a>
                  </ul>
                  <h3>Corda</h3>
                  <ul>
                      <a href="/docs/ganache/corda/working-with-corda"><li>Working with Corda</li></a>
                      <a href="/docs/ganache/corda/workspace-overview"><li>Workspace Overview</li></a>
                      <a href="/docs/ganache/corda/linking-a-corda-project"><li>Linking a Corda Project</li></a>
                      <a href="/docs/ganache/corda/unlinking-a-corda-project"><li>Unlinking a Corda Project</li></a>
                      <a href="/docs/ganache/corda/nodes"><li>Nodes</li></a>
                      <a href="/docs/ganache/corda/transactions"><li>Transactions</li></a>
                      <a href="/docs/ganache/corda/cordapps"><li>CorDapps</li></a>
                      <a href="/docs/ganache/corda/shell"><li>Shell</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/ganache/reference/ganache-settings"><li>Ganache Settings</li></a>
                      <a href="/docs/ganache/reference/workspace-default-configuration"><li>Workspace Default Configuration</li></a>
                  </ul>
              </div>
          
              <a class="toggle-drizzle suite-link" href="#drizzleDocs" data-toggle="collapse">
                <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" /><h2 class="text-drizzle">dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le</h2>
              </a>
              
              <div class="collapse drizzle " id="drizzleDocs" data-parent="#docsSidebar">
                <ul>
                  <a href="/docs/drizzle/overview"><li>Overview</li></a>
                  <a href="/docs/drizzle/quickstart"><li>Quickstart</li></a>
                </ul>
                  <h3>Getting Started</h3>
                  <ul>
                      <a href="/docs/drizzle/getting-started/using-drizzles-redux-store"><li>Using Drizzle&#x27;s Redux Store</li></a>
                      <a href="/docs/drizzle/getting-started/contract-interaction"><li>Contract Interaction</li></a>
                  </ul>
                  <h3>React</h3>
                  <ul>
                      <a href="/docs/drizzle/react/react-integration"><li>React Integration</li></a>
                      <a href="/docs/drizzle/react/react-components"><li>React Components</li></a>
                  </ul>
                  <h3>Reference</h3>
                  <ul>
                      <a href="/docs/drizzle/reference/drizzle-options"><li>Drizzle Options</li></a>
                      <a href="/docs/drizzle/reference/drizzle-state"><li>Drizzle State</li></a>
                      <a href="/docs/drizzle/reference/drizzle-actions"><li>Drizzle Actions</li></a>
                      <a href="/docs/drizzle/reference/how-data-stays-fresh"><li>How Data Stays Fresh</li></a>
                  </ul>
              </div>
            </div>
          </aside>      
        <div class="col-lg-9 bd-light-cream docs-content">
          
    <h1 class="link-markdown">
      <a class="anchor-target" name="debugging-your-contracts"></a>
      <a href="#debugging-your-contracts"><i class="fas fa-link"></i></a>
      Debugging Your Contracts
    </h1>
  <p>Truffle includes an integrated debugger so that you can debug transactions made against your contracts. This debugger looks and feels like existing command line debuggers available for traditional development environments.</p>

    <h2 class="link-markdown">
      <a class="anchor-target" name="overview"></a>
      <a href="#overview"><i class="fas fa-link"></i></a>
      Overview
    </h2>
  <p class="alert alert-info m-t-2">
<strong>
New in Truffle v5.1: `truffle test --debug`.
</strong>
Set breakpoints in your JavaScript tests with the new `debug()` global!
<a href="#in-test-debugging">See below</a>.
</p>

<p class="alert alert-info m-t-2">
<strong>
New in Truffle v5.1.29: `truffle debug --fetch-external`.
</strong>
Debug transactions involving contracts not in your project that are verified on <a href="https://etherscan.io/">Etherscan</a>!  (And as of v5.1.32, it works with <a href="https://github.com/ethereum/sourcify">Sourcify</a> too!)
<a href="#debugging-external-contracts-with-verified-source">See below</a>.
</p>


<p>Debugging a transaction on the blockchain is different than debugging traditional applications (for instance, applications written in C++ or Javascript). When debugging a transaction on the blockchain, you&#39;re not running the code in real-time; instead, you&#39;re stepping over the historical execution of that transaction, and mapping that execution onto its associated code. This gives us many liberties in debugging, in that we can debug any transaction, any time, so long as we have the code and artifacts for the contracts the transaction interacted with. Think of these code and artifacts as akin to the debugging symbols needed by traditional debuggers.</p>
<p>In order to debug transactions, you&#39;ll need the following:</p>
<ul>
<li>Truffle 4.0 or above.</li>
<li>The hash of a transaction on your desired blockchain.</li>
<li>The source code and artifacts the transaction encounters.</li>
</ul>
<p>Note that it&#39;s okay if your desired transaction resulted in an exception or if it ran out of gas. The transaction still exists on chain, and so you can still debug it!</p>
<p>Warning: Debugging a transaction against a contract that was compiled with optimization enabled may not work reliably.</p>

    <h2 class="link-markdown">
      <a class="anchor-target" name="in-test-debugging"></a>
      <a href="#in-test-debugging"><i class="fas fa-link"></i></a>
      In-test debugging
    </h2>
  <p>Truffle v5.1 and above provides the <code>truffle test --debug</code> flag and associated
<code>debug()</code> global function, allowing you to interrupt tests to debug specific
operations.</p>
<p>Instead of capturing the transaction hash as described below, simply wrap
any contract operation with <code>debug()</code>, like so:</p>
<pre><code class="language-javascript">it(&quot;should succeed&quot;, async function() {
  // wrap what you want to debug with `debug()`:
  await debug( myContract.myFunction(accounts[1], { from: accounts[0] }) );
  //           ^^^^^^^^^^^^^^^^^^ wrap contract operation ^^^^^^^^^^^^^^
});</code></pre>
<p>Then, run <code>truffle test --debug</code>. Truffle will compile your sources and run
your tests as normal until reaching the operation in question. At this point,
Truffle will interrupt the normal test flow and start the debugger, allowing
you to set breakpoints, inspect Solidity variables, etc.</p>
<p>See <a href="/docs/truffle/writing-tests-in-javascript">Writing tests in JavaScript</a>
for more information on <code>truffle test</code>, and see
<a href="/docs/truffle/getting-started/interacting-with-your-contracts">Interacting with your contracts</a>
to learn about contract operations.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="debugging-read-only-calls"></a>
      <a href="#debugging-read-only-calls"><i class="fas fa-link"></i></a>
      Debugging read-only calls
    </h3>
  <p>Running the debugger from inside your JS tests allow additional functionality
beyond which <code>truffle debug &lt;txHash&gt;</code> can provide.</p>
<p>Beyond just debugging transactions, in-test debugging allows you to debug
read-only calls as well.</p>
<pre><code class="language-javascript">it(&quot;should get latest result&quot;, async function() {
  // wrap what you want to debug with `debug()`:
  const result = await debug( myContract.getResult(&quot;latest&quot;) );
  //                          ^^^^^ read-only function ^^^^^
});</code></pre>

    <h2 class="link-markdown">
      <a class="anchor-target" name="command"></a>
      <a href="#command"><i class="fas fa-link"></i></a>
      Command
    </h2>
  <p>To use the debugger, gather the transaction you&#39;d like to debug then run the following:</p>
<pre><code class="language-shell">$ truffle debug &lt;transaction hash&gt;</code></pre>
<p>Using a transaction starting with <code>0x8e5dadfb921dd...</code> as an example, the command would look as follows:</p>
<pre><code class="language-shell">$ truffle debug 0x8e5dadfb921ddddfa8f53af1f9bd8beeac6838d52d7e0c2fe5085b42a4f3ca76</code></pre>
<p>This will launch the debugging interface described below.</p>
<p>If you simply want to open the debugger to get it ready, so that you can debug a transaction later, you can also simply run:</p>
<pre><code class="language-shell">$ truffle debug</code></pre>
<p>Regardless of how you start the debugger, once it is running you are not limited to debugging only the transaction you launched it with; it is possible to unload the current transaction and load a new one, as described below.</p>
<p>You can specify the network you want to debug on with the <code>--network</code> option:</p>
<pre><code class="language-shell">$ truffle debug &lt;transaction hash&gt; --network &lt;network&gt;</code></pre>
<p>And with the <code>--fetch-external</code> option (<a href="#debugging-external-contracts-with-verified-source">see below</a>), you can debug contract instances outside your project that have verified source code on <a href="https://etherscan.io/">Etherscan</a> or <a href="https://github.com/ethereum/sourcify">Sourcify</a>.  When using this option, you must specify a transaction hash to debug, and you will not be able to switch transactions from inside the debugger.</p>
<pre><code class="language-shell">$ truffle debug &lt;transaction hash&gt; --fetch-external --network &lt;network&gt;</code></pre>
<p class="alert alert-info m-t-2">
<strong>
Faster debugger startup:
</strong>
If your project was not compiled all at once (or under certain other
conditions), the debugger will have to do its own compile of your project on
startup.  This can be very slow.  If you compile your whole project at once,
however, the debugger can likely avoid the initial recompile, speeding up
startup greatly.
</p>


    <h2 class="link-markdown">
      <a class="anchor-target" name="debugging-external-contracts-with-verified-source"></a>
      <a href="#debugging-external-contracts-with-verified-source"><i class="fas fa-link"></i></a>
      Debugging external contracts with verified source
    </h2>
  <p>If you pass the <code>--fetch-external</code> option, the debugger will attempt to download verified source code off of <a href="https://etherscan.io/">Etherscan</a> and <a href="https://github.com/ethereum/sourcify">Sourcify</a> for any addresses involved in the transaction that it cannot find source code for in your project.  You can of course debug such transactions without this option, but when stepping through the transaction the external calls to these unrecognized contracts will simply be skipped over.</p>
<p>This option can also be abbreviated <code>-x</code>.</p>
<p>If you have an Etherscan API key, you can include it in your configuration file and the debugger will use it when downloading source from Etherscan.  Including this can speed up downloads.</p>
<p>Example:</p>
<pre><code class="language-javascript">module.exports = {
  /* ... rest of truffle-config.js ... */
  etherscan: {
    apiKey: &quot;0123456789abcdef0123456789abcdef&quot; //replace this with your API key if you have one
  }
}</code></pre>

    <h2 class="link-markdown">
      <a class="anchor-target" name="debugging-interface"></a>
      <a href="#debugging-interface"><i class="fas fa-link"></i></a>
      Debugging interface
    </h2>
  <p>Starting the debugger will open an interface familiar to those that have debugged other types of applications. When it starts, you&#39;ll see the following:</p>
<ul>
<li>A list of addresses either transacted against or created during the course of this transaction.</li>
<li>A list of available commands for using the debugger.</li>
<li>And the initial entry point for the transaction, including contract source file and code preview.</li>
</ul>
<p>The <code>enter</code> key is set to perform the last command entered. When the debugger starts, the <code>enter</code> key is set to step to the next logical source code element encountered during execution (i.e., the next expression or statement evaluated by the Ethereum virtual machine). At this point you can press <code>enter</code> to step through the transaction, or enter one of the available commands to analyze the transaction in more detail. The list of commands is detailed below.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-o-step-over"></a>
      <a href="#-o-step-over"><i class="fas fa-link"></i></a>
      (o) step over
    </h3>
  <p>This command steps over the current line, relative to the position of the statement or expression currently being evaluated in the Solidity source file. Use this command if you don&#39;t want to step into a function call or contract creation on the current line, or if you&#39;d like to quickly jump to a specific point in the source file.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-i-step-into"></a>
      <a href="#-i-step-into"><i class="fas fa-link"></i></a>
      (i) step into
    </h3>
  <p>This command steps into the function call or contract creation currently being evaluated. Use this command to jump into the function and quickly start debugging the code that exists there.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-u-step-out"></a>
      <a href="#-u-step-out"><i class="fas fa-link"></i></a>
      (u) step out
    </h3>
  <p>This command steps out of the currently running function. Use this command to quickly get back to the calling function, or end execution of the transaction if this was the entry point of the transaction.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-n-step-next"></a>
      <a href="#-n-step-next"><i class="fas fa-link"></i></a>
      (n) step next
    </h3>
  <p>This command steps to the next logical statement or expression in the source code. For example, evaluating sub expressions will need to occur first before the virtual machine can evaluate the full expression. Use this command if you&#39;d like to analyze each logical item the virtual machine evaluates.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-step-instruction"></a>
      <a href="#-step-instruction"><i class="fas fa-link"></i></a>
      (;) step instruction
    </h3>
  <p>This command allows you to step through each individual instruction evaluated by the virtual machine. This is useful if you&#39;re interested in understanding the low level bytecode created by the Solidity source code. When you use this command, the debugger will also print out the stack data at the time the instruction was evaluated.  (If additional data displays have been turned on with the <code>p</code> command, those will be shown too.)</p>
<p>You can also use this command with a numerical argument, to step that many times.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-p-print-instruction"></a>
      <a href="#-p-print-instruction"><i class="fas fa-link"></i></a>
      (p) print instruction
    </h3>
  <p>This commands prints the current instruction and stack data, but does not step to the next instruction. Use this when you&#39;d like to see the current instruction and stack data after navigating through the transaction with the logical commands described above.</p>
<p>This command can also print locations other than the stack, if you want to view memory, storage, or calldata.  Simply type <code>p memory</code> to show memory along with the other information, <code>p storage</code> for storage, or <code>p calldata</code> for calldata.  Each of these can also be abbreviated, e.g. <code>p mem</code>; they can also be combined, e.g. <code>p mem sto</code>.</p>
<p>You can also add these extra locations to the default display with <code>+</code>; e.g., <code>p +mem</code> will make it so that memory will always be displayed when you enter <code>p</code> or <code>;</code>, and <code>p -mem</code> will turn this off.  You can even turn off the stack display with <code>p -sta</code>, or force it to display with <code>p sta</code>.  All of these options can again be combined.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-h-print-this-help"></a>
      <a href="#-h-print-this-help"><i class="fas fa-link"></i></a>
      (h) print this help
    </h3>
  <p>Print the list of available commands.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-q-quit"></a>
      <a href="#-q-quit"><i class="fas fa-link"></i></a>
      (q) quit
    </h3>
  <p>Quit the debugger.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-r-reset"></a>
      <a href="#-r-reset"><i class="fas fa-link"></i></a>
      (r) reset
    </h3>
  <p>Reset the debugger to the beginning of the transaction.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-b-set-a-breakpoint"></a>
      <a href="#-b-set-a-breakpoint"><i class="fas fa-link"></i></a>
      (b) set a breakpoint
    </h3>
  <p>This command allows you to set breakpoints for any line in any of your source files (see <a href="#adding-and-removing-breakpoints">examples</a> below).  These can be given by line number; by relative line number; by line number in a specified source file; or one may simply add a breakpoint at the current point in the code.</p>
<p>You don&#39;t need a transaction loaded to set breakpoints, although in that case you will have to specify which source file you mean to set it in.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-b-remove-a-breakpoint"></a>
      <a href="#-b-remove-a-breakpoint"><i class="fas fa-link"></i></a>
      (B) remove a breakpoint
    </h3>
  <p>This command allows you to remove any of your existing breakpoints, with the same syntax as for adding them (see <a href="#adding-and-removing-breakpoints">example</a> below).  Type <code>B all</code> to remove all breakpoints.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-c-continue-until-breakpoint"></a>
      <a href="#-c-continue-until-breakpoint"><i class="fas fa-link"></i></a>
      (c) continue until breakpoint
    </h3>
  <p>This command will cause execution of the code to continue until the next breakpoint is reached or the last line is executed.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-evaluate-and-print-expression"></a>
      <a href="#-evaluate-and-print-expression"><i class="fas fa-link"></i></a>
      (:) evaluate and print expression
    </h3>
  <p>This command will evaluate and print the given expression, based on the current variables and their values (see also <code>v</code>).</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-add-watch-expression"></a>
      <a href="#-add-watch-expression"><i class="fas fa-link"></i></a>
      (+) add watch expression
    </h3>
  <p>This command will add a watch on a provided expression, based on the following syntax: <code>+:&lt;expression&gt;</code>.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-remove-watch-expression"></a>
      <a href="#-remove-watch-expression"><i class="fas fa-link"></i></a>
      (-) remove watch expression
    </h3>
  <p>This command will remove a watch expression, based on the following syntax: <code>-:&lt;expression&gt;</code>.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-list-existing-watch-expressions-and-breakpoints"></a>
      <a href="#-list-existing-watch-expressions-and-breakpoints"><i class="fas fa-link"></i></a>
      (?) list existing watch expressions and breakpoints
    </h3>
  <p>This command will display a list of all the current watch expressions and breakpoints.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-v-display-variables"></a>
      <a href="#-v-display-variables"><i class="fas fa-link"></i></a>
      (v) display variables
    </h3>
  <p>This command will display the current variables and their values.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-t-unload-transaction"></a>
      <a href="#-t-unload-transaction"><i class="fas fa-link"></i></a>
      (T) unload transaction
    </h3>
  <p>This command unloads the current transaction so you can load a new one.  Not usable in <code>--fetch-external</code> mode.</p>

    <h3 class="link-markdown">
      <a class="anchor-target" name="-t-load-transaction"></a>
      <a href="#-t-load-transaction"><i class="fas fa-link"></i></a>
      (t) load transaction
    </h3>
  <p>This command loads a new transaction (given by its transaction hash).  Note that if you already have a transaction loaded, you must first explicitly unload it before you can load a new one.  Not usable in <code>--fetch-external</code> mode.</p>

    <h2 class="link-markdown">
      <a class="anchor-target" name="adding-and-removing-breakpoints"></a>
      <a href="#adding-and-removing-breakpoints"><i class="fas fa-link"></i></a>
      Adding and removing breakpoints
    </h2>
  <p>Below are some examples of adding and removing breakpoints. Note the difference in case between adding (a lowercase &#39;b&#39;) and removing (an uppercase &#39;B&#39;).  If you add a breakpoint at a place where the debugger will skip over, it will be automatically moved down to the next point that the debugger might stop.  This does not apply to removing breakpoints.  Use the <code>?</code> command to list current breakpoints.</p>
<pre><code>MagicSquare.sol:

11:   event Generated(uint n);
12:
13:   function generateMagicSquare(uint n)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

debug(develop:0x91c817a1...)&gt; b 23
Breakpoint added at line 23.

debug(develop:0x91c817a1...)&gt; B 23
Breakpoint removed at line 23.

debug(develop:0x91c817a1...)&gt; b SquareLib:5
Breakpoint added at line 5 in SquareLib.sol.

debug(develop:0x91c817a1...)&gt; b +10
Breakpoint added at line 23.

debug(develop:0x91c817a1...)&gt; b
Breakpoint added at this point in line 13.

debug(develop:0x91c817a1...)&gt; B all
Removed all breakpoints.</code></pre>

          <div class="contribute-link">
            See a way to make this page better? <a href="https://github.com/trufflesuite/trufflesuite.com/edit/develop/src/docs/truffle/getting-started">Edit here &raquo;</a>
          </div>        </div>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="/js/vendor/jquery-3.2.1.slim.min.js"><\/script>')</script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/vendor/prism.js"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script src="/js/docs.js"></script>
  <script src="https://unpkg.com/lunr/lunr.js"></script>
  <script src="/js/docs-search.js"></script>
</body>
</html>