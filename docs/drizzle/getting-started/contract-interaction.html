<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Favicon -->
    <link rel="icon" href="/img/favicons/favicon.ico">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Truffle Suite">
    <link rel="icon" sizes="192x192" href="/img/favicons/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Truffle Suite">
    <link rel="apple-touch-icon" href="/img/favicons/apple-touch-icon.png">

    <!-- Tile icon for Win8/10 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="img/favicons/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <!-- Facebook OpenGraph -->
    <meta property="og:site_name" content="Truffle Suite" />
    <meta property="og:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
    <meta property="og:title" content="Truffle Suite | Documentation | Drizzle | Contract Interaction" />
    <meta property="og:url" content="https://trufflesuite.com/docs/drizzle/getting-started/contract-interacti" />
    <meta property="og:type" content="article" />
    <meta property="og:image" content="https://truffleframework.com/img/favicons/truffle-share.png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="Truffle Suite" />
    <meta name="twitter:title" content="Truffle Suite | Documentation | Drizzle | Contract Interaction" />
    <meta name="twitter:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
    <meta name="twitter:creator" content="Truffle Suite" />
    <meta name="twitter:domain" content="trufflesuite.com" />
    <meta name="twitter:image:src" content="https://truffleframework.com/img/favicons/truffle-share.png" />
    
    <meta name="google-site-verification" content="BSgPkMHzw7IxJTpEElNfD8ZZYPzXgOQiTVPzAxAG8-o" />

      <title>Truffle Suite | Documentation | Drizzle | Contract Interaction</title>

    <link href="https://fonts.googleapis.com/css?family=Grand+Hotel|Open+Sans|Oswald|Varela+Round|Roboto+Condensed|Roboto+Mono" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css" integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/index.css">
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top" id="primaryNav">
      <a class="navbar-brand current" href="/">
        <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" />TRUFFLE SUITE
      </a>
    
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    
      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="suiteDropdown" href="#" data-toggle="dropdown">SUITE</a>
    
            <div class="dropdown-menu">
              <a class="text-truffle" href="/truffle">
                <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><span class="narrow">T</span>RUFFLE
              </a>
              <a class="text-ganache" href="/ganache">
                <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" />Ganache
              </a>
              <a class="text-drizzle" href="/drizzle">
                <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" />dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le
              </a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/docs">DOCS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/tutorials">TUTORIALS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/boxes">BOXES</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/blog">BLOG</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/events">EVENTS</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/community">COMMUNITY</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/university">UNIVERSITY</a>
          </li>
        </ul>
      </div>
    </nav>    
    <main role="main" class="container-fluid">
      <!--<div class="row pt-4 pb-4">
        <div class="col">
          <form>
            <div class="row">
              <div class="col">
                <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="ðŸ” Search">
              </div>
              <div class="col">
                <select id="inputState" class="form-control">
                  <option selected>4.1</option>
                  <option>4.0.6</option>
                  <option>4.0.5</option>
                </select>
              </div>
              <div class="col">
                <button type="submit" class="btn btn-truffle">SEARCH</button>
              </div>
            </div>
          </form>
        </div>
      </div>-->

      <div class="row row-docs-main">
        <aside class="col-lg-3 docs-sidebar" id="docsSidebar">
          <h2 class="space-icon d-lg-none text-center" id="docsSidebarToggle"><i class="fas fa-book"></i> SEARCH &amp; CONTENTS</h2>
        
          <form class="mb-4" id="searchForm">
            <div class="input-group">
              <input type="text" class="form-control" id="searchInput" placeholder="Search">
              <div class="input-group-append">
                <button type="submit" class="btn btn-truffle">SEARCH</button>
              </div>
            </div>
          </form>
        
          <a class="toggle-truffle" href="#truffleDocs" data-toggle="collapse">
            <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><h2 class="text-truffle"><span class="narrow">T</span>RUFFLE</h2>
          </a>
        
          <div class="collapse truffle " id="truffleDocs" data-parent="#docsSidebar">
            <ul>
              <a href="/docs/truffle/overview"><li>Overview</li></a>
              <a href="/docs/truffle/quickstart"><li>Quickstart</li></a>
            </ul>
              <h3>Getting Started</h3>
              <ul>
                  <a href="/docs/truffle/getting-started/installation"><li>Installation</li></a>
                  <a href="/docs/truffle/getting-started/creating-a-project"><li>Creating a Project</li></a>
                  <a href="/docs/truffle/getting-started/compiling-contracts"><li>Compiling Contracts</li></a>
                  <a href="/docs/truffle/getting-started/running-migrations"><li>Running Migrations</li></a>
                  <a href="/docs/truffle/getting-started/interacting-with-your-contracts"><li>Interacting with Your Contracts</li></a>
                  <a href="/docs/truffle/getting-started/truffle-with-metamask"><li>Truffle with MetaMask</li></a>
                  <a href="/docs/truffle/getting-started/package-management-via-ethpm"><li>Package Management via EthPM</li></a>
                  <a href="/docs/truffle/getting-started/package-management-via-npm"><li>Package Management via NPM</li></a>
                  <a href="/docs/truffle/getting-started/debugging-your-contracts"><li>Debugging Your Contracts</li></a>
                  <a href="/docs/truffle/getting-started/using-truffle-develop-and-the-console"><li>Using Truffle Develop and The Console</li></a>
                  <a href="/docs/truffle/getting-started/writing-external-scripts"><li>Writing External Scripts</li></a>
                  <a href="/docs/truffle/getting-started/working-with-quorum"><li>Working With Quorum</li></a>
              </ul>
              <h3>Testing</h3>
              <ul>
                  <a href="/docs/truffle/testing/testing-your-contracts"><li>Testing Your Contracts</li></a>
                  <a href="/docs/truffle/testing/writing-tests-in-javascript"><li>Writing Tests in JavaScript</li></a>
                  <a href="/docs/truffle/testing/writing-tests-in-solidity"><li>Writing Tests in Solidity</li></a>
              </ul>
              <h3>Advanced</h3>
              <ul>
                  <a href="/docs/truffle/advanced/networks-and-app-deployment"><li>Networks and App Deployment</li></a>
                  <a href="/docs/truffle/advanced/build-processes"><li>Build Processes</li></a>
                  <a href="/docs/truffle/advanced/creating-a-truffle-box"><li>Creating a Truffle Box</li></a>
              </ul>
              <h3>Reference</h3>
              <ul>
                  <a href="/docs/truffle/reference/choosing-an-ethereum-client"><li>Choosing an Ethereum Client</li></a>
                  <a href="/docs/truffle/reference/configuration"><li>Configuration</li></a>
                  <a href="/docs/truffle/reference/contract-abstractions"><li>Contract Abstractions</li></a>
                  <a href="/docs/truffle/reference/truffle-commands"><li>Truffle Commands</li></a>
                  <a href="/docs/truffle/reference/contact-the-developers"><li>Contact The Developers</li></a>
              </ul>
          </div>
        
          <a class="toggle-ganache" href="#ganacheDocs" data-toggle="collapse">
            <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" /><h2 class="text-ganache">Ganache</h2>
          </a>
          
          <div class="collapse ganache " id="ganacheDocs" data-parent="#docsSidebar">
            <ul>
              <a href="/docs/ganache/overview"><li>Overview</li></a>
              <a href="/docs/ganache/quickstart"><li>Quickstart</li></a>
            </ul>
              <h3>Workspaces</h3>
              <ul>
                  <a href="/docs/ganache/workspaces/the-quickstart-workspace"><li>The Quickstart Workspace</li></a>
                  <a href="/docs/ganache/workspaces/creating-workspaces"><li>Creating Workspaces</li></a>
                  <a href="/docs/ganache/workspaces/loading-existing-workspaces"><li>Loading Existing Workspaces</li></a>
                  <a href="/docs/ganache/workspaces/switching-workspaces"><li>Switching Workspaces</li></a>
                  <a href="/docs/ganache/workspaces/deleting-workspaces"><li>Deleting Workspaces</li></a>
              </ul>
              <h3>Truffle Projects</h3>
              <ul>
                  <a href="/docs/ganache/truffle-projects/linking-a-truffle-project"><li>Linking a Truffle Project</li></a>
                  <a href="/docs/ganache/truffle-projects/unlinking-a-truffle-project"><li>Unlinking a Truffle Project</li></a>
                  <a href="/docs/ganache/truffle-projects/contracts-page"><li>Contracts Page</li></a>
                  <a href="/docs/ganache/truffle-projects/events-page"><li>Events Page</li></a>
                  <a href="/docs/ganache/truffle-projects/decoded-transactions"><li>Decoded Transactions</li></a>
              </ul>
              <h3>Reference</h3>
              <ul>
                  <a href="/docs/ganache/reference/ganache-settings"><li>Ganache Settings</li></a>
                  <a href="/docs/ganache/reference/workspace-default-configuration"><li>Workspace Default Configuration</li></a>
              </ul>
          </div>
        
          <a class="toggle-drizzle" href="#drizzleDocs" data-toggle="collapse">
            <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" /><h2 class="text-drizzle">dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le</h2>
          </a>
          
          <div class="collapse drizzle show" id="drizzleDocs" data-parent="#docsSidebar">
            <ul>
              <a href="/docs/drizzle/overview"><li>Overview</li></a>
              <a href="/docs/drizzle/quickstart"><li>Quickstart</li></a>
            </ul>
              <h3>Getting Started</h3>
              <ul>
                  <a href="/docs/drizzle/getting-started/using-an-existing-redux-store"><li>Using an Existing Redux Store</li></a>
                  <a href="/docs/drizzle/getting-started/contract-interaction"><li>Contract Interaction</li></a>
              </ul>
              <h3>React</h3>
              <ul>
                  <a href="/docs/drizzle/react/react-integration"><li>React Integration</li></a>
                  <a href="/docs/drizzle/react/react-components"><li>React Components</li></a>
              </ul>
              <h3>Reference</h3>
              <ul>
                  <a href="/docs/drizzle/reference/drizzle-options"><li>Drizzle Options</li></a>
                  <a href="/docs/drizzle/reference/drizzle-state"><li>Drizzle State</li></a>
                  <a href="/docs/drizzle/reference/how-data-stays-fresh"><li>How Data Stays Fresh</li></a>
              </ul>
          </div>
        </aside>
        <div class="col-lg-9 bd-light-cream docs-content">
          
    <h1 class="link-markdown">
      <a href="#contract-interaction" name="contract-interaction"><i class="fas fa-link"></i></a>
      Contract Interaction
    </h1>
  <p>Drizzle provides helpful methods on top of the default web3.Contract methods to keep your calls and transactions in sync with the store.</p>

    <h2 class="link-markdown">
      <a href="#-code-cachecall-code-" name="-code-cachecall-code-"><i class="fas fa-link"></i></a>
      <code>cacheCall()</code>
    </h2>
  <p>Gets contract data. Calling the <code>cacheCall()</code> function on a contract will execute the desired call and return a corresponding key so the data can be retrieved from the store. When a new block is received, Drizzle will refresh the store automatically _if_ any transactions in the block touched our contract. For more information on how this works, see <a href="https://truffleframework.com/docs/drizzle/reference/how-data-stays-fresh">How Data Stays Fresh</a>.</p>
<p><strong>Note:</strong> We have to check that Drizzle is initialized before fetching data. A simple if statement such as below is fine for displaying a few pieces of data, but a better approach for larger dapps is to use a <a href="https://github.com/trufflesuite/drizzle-react#recipe-loading-component">loading component</a>. We&#39;ve already built one for you in our <a href="https://github.com/trufflesuite/drizzle-react-components"><code>drizzle-react-components</code> library</a> as well.</p>
<pre><code class="lang-javascript">// Assuming we&#39;re observing the store for changes.
var state = drizzle.store.getState()

// If Drizzle is initialized (and therefore web3, accounts and contracts), continue.
if (state.drizzleStatus.initialized) {
    // Declare this call to be cached and synchronized. We&#39;ll receive the store key for recall.
    const dataKey = drizzle.contracts.SimpleStorage.methods.storedData.cacheCall()

    // Use the dataKey to display data from the store.
    return state.contracts.SimpleStorage.methods.storedData[dataKey].value
}

// If Drizzle isn&#39;t initialized, display some loading indication.
return &#39;Loading...&#39;
</code></pre>
<p>The contract instance has all of its standard web3 properties and methods. For example, you could still call as normal if you don&#39;t want something in the store:</p>
<pre><code class="lang-javascript">drizzle.contracts.SimpleStorage.methods.storedData().call()
</code></pre>

    <h2 class="link-markdown">
      <a href="#-code-cachesend-code-" name="-code-cachesend-code-"><i class="fas fa-link"></i></a>
      <code>cacheSend()</code>
    </h2>
  <p>Sends a contract transaction. Calling the <code>cacheSend()</code> function on a contract will send the desired transaction and return a corresponding transaction hash so the status can be retrieved from the store. The last argument can optionally be an options object with the typical from, gas and gasPrice keys. Drizzle will update the transaction&#39;s state in the store (pending, success, error) and store the transaction receipt. For more information on how this works, see <a href="https://truffleframework.com/docs/drizzle/reference/how-data-stays-fresh">How Data Stays Fresh</a>.</p>
<p><strong>Note:</strong> We have to check that Drizzle is initialized before fetching data. A simple if statement such as below is fine for displaying a few pieces of data, but a better approach for larger dapps is to use a <a href="https://github.com/trufflesuite/drizzle-react#recipe-loading-component">loading component</a>. We&#39;ve already built one for you in our <a href="https://github.com/trufflesuite/drizzle-react-components"><code>drizzle-react-components</code> library</a> as well.</p>
<pre><code class="lang-javascript">// Assuming we&#39;re observing the store for changes.
var state = drizzle.store.getState()

// If Drizzle is initialized (and therefore web3, accounts and contracts), continue.
if (state.drizzleStatus.initialized) {
    // Declare this transaction to be observed. We&#39;ll receive the stackId for reference.
    const stackId = drizzle.contracts.SimpleStorage.methods.set.cacheSend(2, {from: &#39;0x3f...&#39;})

    // Use the dataKey to display the transaction status.
    if (state.transactionStack[stackId]) {
        const txHash = state.transactionStack[stackId]

        return state.transactions[txHash].status
    }
}

// If Drizzle isn&#39;t initialized, display some loading indication.
return &#39;Loading...&#39;
</code></pre>
<p>For more information on what&#39;s contained in transaction state, see <a href="https://truffleframework.com/docs/drizzle/reference/drizzle-state">Drizzle State</a>.</p>
<p>The contract instance has all of its standard web3 properties and methods. For example, you could still send as normal if you don&#39;t want a tx in the store:</p>
<pre><code class="lang-javascript">drizzle.contracts.SimpleStorage.methods.set(2).send({from: &#39;0x3f...&#39;})
</code></pre>

    <h2 class="link-markdown">
      <a href="#adding-contracts-dynamically" name="adding-contracts-dynamically"><i class="fas fa-link"></i></a>
      Adding Contracts Dynamically
    </h2>
  <p>You can programmatically add contracts to Drizzle using either <code>drizzle.addContract()</code> or the <code>ADD_CONTRACT</code> action.</p>
<pre><code class="lang-javascript">var contractConfig = {
  contractName: &quot;0x066408929e8d5Ed161e9cAA1876b60e1fBB5DB75&quot;,
  web3Contract: new web3.eth.Contract(/* ... */)
}
events = [&#39;Mint&#39;]

// Using an action
dispatch({type: &#39;ADD_CONTRACT&#39;, drizzle, contractConfig, events, web3})

// Or using the Drizzle context object
this.context.drizzle.addContract(contractConfig, events)
</code></pre>

    <h2 class="link-markdown">
      <a href="#removing-contracts-dynamically" name="removing-contracts-dynamically"><i class="fas fa-link"></i></a>
      Removing Contracts Dynamically
    </h2>
  <p>You can also delete contracts using either <code>drizzle.deleteContract()</code> or the <code>DELETE_CONTRACT</code> action.</p>
<pre><code class="lang-javascript">const contractName = &quot;MyContract&quot;

// Using an action
dispatch({type: &#39;DELETE_CONTRACT&#39;, drizzle, contractName})

// Or using the Drizzle context object
this.context.drizzle.deleteContract(contractName)
</code></pre>


          <div class="contribute-link">
            See a way to make this page better? <a href="https://github.com/trufflesuite/trufflesuite.com/edit/master/src/docs/drizzle/getting-started">Edit here &raquo;</a>
          </div>        </div>
      </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="/js/vendor/jquery-3.2.1.slim.min.js"><\/script>')</script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/vendor/prism.js"></script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script src="/js/docs.js"></script>
    <script src="https://unpkg.com/lunr/lunr.js"></script>
    <script src="/js/docs-search.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-83874933-3', 'auto');
      ga('send', 'pageview');
    </script>  </body>
</html>