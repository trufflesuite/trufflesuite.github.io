<!DOCTYPE html>
<html>
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WHT4PS2');</script>
  <!-- End Google Tag Manager -->
  
  <!-- HubSpot Forms -->
  <!--[if lte IE 8]>
    <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2-legacy.js"></script>
  <![endif]-->
  <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>  <!-- Start of HubSpot Embed Code -->
  <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/5258293.js"></script>
  <!-- End of HubSpot Embed Code -->  
  <meta charset="utf-8">
  <meta name="description" content="The Truffle suite of tools make dapp development easier and more consistent.">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
  <!-- Favicon -->
  <link rel="icon" href="/img/favicons/favicon.ico">

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="Truffle Suite">
  <link rel="icon" sizes="192x192" href="/img/favicons/chrome-touch-icon-192x192.png">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Truffle Suite">
  <link rel="apple-touch-icon" href="/img/favicons/apple-touch-icon.png">

  <!-- Tile icon for Win8/10 (144x144 + tile color) -->
  <meta name="msapplication-TileImage" content="img/favicons/ms-touch-icon-144x144-precomposed.png">
  <meta name="msapplication-TileColor" content="#3372DF">

  <!-- Facebook OpenGraph -->
  <meta property="og:site_name" content="Truffle Suite" />
  <meta property="og:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
  <meta property="og:title" content="Using Truffle&#x27;s ENS Integration | Blog | Truffle Suite" />
  <meta property="og:url" content="https://trufflesuite.com/blog/using-the-ens-integration" />
  <meta property="og:type" content="article" />
  <meta property="og:image" content="https://truffleframework.com/img/favicons/truffle-share.png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="Truffle Suite" />
  <meta name="twitter:title" content="Using Truffle&#x27;s ENS Integration | Blog | Truffle Suite" />
  <meta name="twitter:description" content="The Truffle suite of tools make dapp development easier and more consistent." />
  <meta name="twitter:creator" content="Truffle Suite" />
  <meta name="twitter:domain" content="trufflesuite.com" />
  <meta name="twitter:image:src" content="https://truffleframework.com/img/favicons/truffle-share.png" />
  
  <meta name="google-site-verification" content="BSgPkMHzw7IxJTpEElNfD8ZZYPzXgOQiTVPzAxAG8-o" />
    
  <title>Using Truffle&#x27;s ENS Integration | Blog | Truffle Suite</title>

  <link href="https://fonts.googleapis.com/css?family=Grand+Hotel|Open+Sans|Oswald|Varela+Round|Roboto+Condensed|Roboto+Mono" rel="stylesheet">
  <script src="https://kit.fontawesome.com/371f2d7a8a.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/css/index.css">
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WHT4PS2"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->  
  <nav class="navbar navbar-expand-md navbar-dark fixed-top" id="primaryNav">
    <a class="navbar-brand current" href="/">
      <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><span class="d-none d-lg-block">TRUFFLE SUITE</span>
    </a>
  
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  
    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="suiteDropdown" href="#" data-toggle="dropdown">SUITE</a>
  
          <div class="dropdown-menu">
            <a class="text-truffle" href="/teams">
              <img class="suite-logo" src="/img/tt-logomark.svg" alt="Truffle Teams Logo" /><span class="narrow">T</span>RUFFLE TEAMS
            </a>
            <a class="text-truffle" href="/truffle">
              <img class="suite-logo" src="/img/truffle-logomark.svg" alt="Truffle Logo" /><span class="narrow">T</span>RUFFLE
            </a>
            <a class="text-ganache" href="/ganache">
              <img class="suite-logo" src="/img/ganache-logomark.svg" alt="Ganache Logo" />Ganache
            </a>
            <a class="text-drizzle" href="/drizzle">
              <img class="suite-logo" src="/img/drizzle-logomark.svg" alt="Drizzle Logo" />dri<span class="drizzle-z-skew-1">z</span><span class="drizzle-z-skew-2">z</span>le
            </a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/docs">DOCS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link trufflecon-link" href="/trufflecon2020">TRUFFLEC<img src="/img/truffle-logomark.svg" alt="Truffle Logo"/>N</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/tutorials">TUTORIALS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/boxes">BOXES</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog">BLOG</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/events">EVENTS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/community">COMMUNITY</a>
        </li>
      </ul>
    </div>
  </nav>
  <main class="container container-heading container-narrow">
    <div class="row">
      <div class="col">
        <h1>Using Truffle&#x27;s ENS Integration</h1>
        <ul class="list-sm-stacker space-icon mb-0">
          <li><i class="far fa-calendar-alt"></i> 2019-11-21&nbsp;&nbsp;&nbsp;</li>
          <li><i class="far fa-user"></i> Tyler Feickert</li>
        </ul>
      </div>
    </div>
  </main>

  <main class="banner banner-light-cream pt-5 pb-5" role="main">
    <div class="container container-post">
      <div class="row justify-content-center">
        <div class="col">
          <p><strong>By Tyler Feickert, Blockchain Tools Engineer at Truffle</strong></p>
<p>Among the new features released with Truffle 5.1 is support for Ethereum Name Service
(ENS) name resolution and setting the resolver address for owned names!</p>
<p>ENS is a system that allows for the resolution of Ethereum addresses using
human-readable names. Like DNS, ENS aims to simplify working with addresses and
allowing us to work with names like &quot;truffle.eth&quot; in place of things that cumbersomely
resemble something like <code>&quot;0x1234567890123456789012345678901234567890&quot;</code>. Are you
sure you copied that address correctly? Ready to send your Ether there?</p>
<p>In ENS, a contract called a registry is deployed to a network. The ENS team has
deployed a registry contract to Mainnet and several test networks. These are the
registries that Truffle connects to by default if no registry address is set
in the Truffle config.</p>
<p>An ENS registry contract contains a list of names and who owns them. Each name
also points to a resolver contract if one is set. Addresses own ENS names and
have the ability to set the resolver that a given name points to. The resolver
is the contract responsible for returning an address for resolution. The
idea is that the owner will have the ability to set the resolver contract
to return the desired address.</p>
<p>For more detailed information on ENS, check out the <a href="https://ens.domains/">ENS website</a>.</p>
<p>So we at Truffle think this project is pretty awesome and, as mentioned above,
built an integration with it. Previously in your migrations, for example, you
needed to manually deal with addresses. So maybe you wanted to send some
tokens from your contract to another address. In your Truffle migration you
might have the following code:</p>
<pre><code class="language-javascript">await myTokenContract.sendTokens(
  999,
  &quot;0x1234567890123456789012345678901234567890&quot;,
  { from: &quot;0x0987654321098765432109876543210987654321&quot; }
);</code></pre>
<p>It is difficult and tiring to deal with raw addresses like this.</p>
<p>Now in Truffle, if you turn on the ENS name resolution and you have a
resolver set to your address of choice, you can do something like the
following in place of the above:</p>
<pre><code class="language-javascript">await myTokenContract.sendTokens(
  999,
  &quot;truffle.eth&quot;,
  { from: &quot;my.account&quot; }
);</code></pre>
<p>Well, that seems much easier to read. Under the hood during the migrations,
Truffle will connect to the on-chain registry and automatically resolve the
addresses for both &quot;truffle.eth&quot; and &quot;my.account&quot;. You now can use
valid ENS names in place of addresses in your migrations! In other
words, any place that an address is expected for an argument to a
function call, you can instead provide the ENS name.</p>
<p>One other big piece of functionality for this ENS integration is the ability to set
the resolution address for owned ENS addresses. You can do this using
<code>deployer.ens.setAddress</code> in your migrations.</p>
<p>Suppose I control an address that owns the name &quot;arnold.hagenchop.eth&quot; and I
want to set the address to &quot;0x1234123412123412341212341234121234123412&quot;. In
this case I would write something like the following in my migration:</p>
<pre><code class="language-javascript">const myAddress = &quot;0x1234123412123412341212341234121234123412&quot;;
await deployer.ens.setAddress(
  &quot;arnold.hagenchop.eth&quot;,
  myAddress,
  { from: &quot;0x8888888888888888888888888888888888888888&quot; }
)</code></pre>
<p>Now let&#39;s take a step back and look at what we did. So you can see that the
<code>setAddress</code> method has three arguments. The first one is the name that we&#39;d
like to set the resolver for. As stated above we want to set the resolver
address for &quot;arnold.hagenchop.eth&quot;. The second argument is the address to set
for the given name&#39;s ENS resolution. The last one is an object that resembles
a transaction parameter object. The important thing about this object is
that it must have a <code>from</code> property with the address that controls the name
given as the first argument. This is important or the transaction will fail!</p>
<p>You can find some more information about registering ENS names from the
<a href="https://ens.domains/">ENS website</a>.</p>
<p>One other useful convenience with this method is that you can also provide
a Truffle contract object that has a deployed address as the second argument
if you&#39;d like. So the above code might look like the following instead:</p>
<pre><code class="language-javascript">const MyContract = artifacts.require(&quot;MyContract&quot;);
const myContract = await MyContract.deployed();
await deployer.ens.setAddress(
  &quot;arnold.hagenchop.eth&quot;,
  myContract,
  { from: &quot;0x8888888888888888888888888888888888888888&quot; }
)</code></pre>
<p>In that case, &quot;arnold.hagenchop.eth&quot; will be set to the address at which
<code>myContract</code> is deployed!</p>
<p>This new integration should just be the start of a much more robust system that
allows Truffle projects to interact with ENS! In the future, we also hope
to add other features such as reverse resolution (resolving a name from an
address) and automatic name registration where possible. We think this will
be a big step forward in making the Ethereum ecosystem more accessible as well
as convenient to work with!</p>
<p>For more thorough information about this integration, see the
<a href="https://www.trufflesuite.com/docs/truffle/advanced/ethereum-name-service">Truffle docs</a>.
We have also created an
<a href="https://github.com/truffle-box/v5.1-example-box#v51-example-box">example Truffle box</a>
that has some examples of using this new ENS integration alongside other new
Truffle v5.1 features. We hope you find this feature as useful as we think
it is! Happy Truffling!</p>


          <div class="contribute-link">
            See a way to make this page better? <a href="https://github.com/trufflesuite/trufflesuite.com/edit/develop/src/blog">Edit here &raquo;</a>
          </div>        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <div class="row">
        <div class="col-12 col-md-2 mb-4 mb-md-0">
          <img class="truffle-logo" src="/img/truffle-logo-light.svg" alt="Truffle Logo" />
        </div>
  
        <div class="col-12 col-md-5 mb-3 mb-md-0">
          <ul>
            <li><a href="mailto:inquiry@trufflesuite.com">CONTACT US</a></li>
            <li><a href="/policy">PRIVACY POLICY</a></li>
            <li><a href="/press-releases">PRESS RELEASES</a></li>
            <li><a href="/staff">STAFF</a></li>
            <li><a href="/dashboard">DASHBOARD</a></li>
            <li><a href="https://github.com/trufflesuite">GITHUB</a></li>
            <li><a class="trufflecon-link" href="https://www.trufflesuite.com/trufflecon2020">TRUFFLEC<img src="/img/truffle-logomark.svg" alt="Truffle Logo" /><span>O</span>N 2020</a></li>
            <li><strong>&copy; Truffle Blockchain Group 2020</strong></li>
          </ul>
  
          <ul class="list-inline h4 ">
            <li class="list-inline-item mb-0"><a href="https://www.reddit.com/r/truffle"><i class="fab fa-reddit-square"></i></a></li>
            <li class="list-inline-item mb-0"><a href="https://twitter.com/trufflesuite"><i class="fab fa-twitter-square"></i></a></li>
            <li class="list-inline-item mb-0"><a href="https://www.facebook.com/trufflesuite/"><i class="fab fa-facebook-square"></i></a></li>
            <li class="list-inline-item mb-0"><a href="https://www.instagram.com/truffledevsuite/"><i class="fab fa-instagram"></i></a></li>
            <li class="list-inline-item mb-0"><a href="https://www.linkedin.com/company/trufflesuite/"><i class="fab fa-linkedin"></i></a></li>
            <li class="list-inline-item mb-0"><a href="https://www.youtube.com/channel/UCo2cy2Z7_91zPJSrb6NWfSw"><i class="fab fa-youtube-square"></i></a></li>
          </ul>
        </div>
  
        <div class="col-12 col-md-5">
          <h4>SIGN UP FOR THE TRUFFLE MAILING LIST</h4>
          <script>
            hbspt.forms.create({
               portalId: "5258293",
               formId: "afcfabf3-e2c3-4a08-aace-ef5c7b13c3d8"
            });
          </script>
        </div>
      </div>
    </div>
  </footer>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="/js/vendor/jquery-3.2.1.slim.min.js"><\/script>')</script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/vendor/prism.js"></script>
  <script src="/js/markdown-cleanup.js"></script>
</body>
</html>